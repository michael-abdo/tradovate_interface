window,(window._walkmeWebpackJP=window._walkmeWebpackJP||[]).push([[28],{1199:function(t,n,e){var r=_walkmeInternals.ctx,a=r.get("PlatformDI"),i=r.get("Consts");r.register("TutorialsManager").asCtor(e(1530).TutorialsManager).dependencies("Lib, Consts, PermalinkManager"),r.register("WalkthrusModule").asCtor(e(1531)).dependencies("Lib, DataFixer, SiteConfigManager, WalkthrusContainer, SettingsValuesRetriever, Logger, Consts, ArrayUtils, CommonEvents, CommonUtils, WalkthruRedirectService, TimerManager, PositionHelper, BalloonsContainer, CurrentWalkthruData, WalkthruStatePersister, PlayGuidGenerator, AuditSourceManager, UiUtils, FramesetsUtils, StepRetriever, FeaturesManager, InputGenerator, StepUtils, ComplexHtmlElementsProvider, LibDestroyer,BalloonDrawerProvider, LocationMatcher, DefaultPlaceHolderConfigsCreator, WalkthruSafeStartHandler"),r.register("StepRetriever").asCtor(e(1532)).dependencies("WalkthrusContainer"),r.register("WalkthruOnBeforeUnloadHandler").asCtor(e(1533)).dependencies("Logger, WalkthrusModule, TimerManager, CrossDomainManager, FeaturesManager, FlowStack, WindowBeforeUnloadHandler"),r.register("WalkthrusContainer").asCtor(e(1534)),r.register("CurrentWalkthruData").asCtor(e(1535)).dependencies("WalkthrusContainer, Consts"),r.register("CurrentStepUI").asCtor(e(1536)).dependencies("CurrentWalkthruData, StepUtils"),r.register("WalkthruStatePersister").asCtor(e(1537)).dependencies("Consts, InteractionManager, WalkthrusContainer, CommonUtils, CurrentWalkthruData, WalkthruBranchData, CommonEvents"),r.register("WalkthruStateRestorer").asCtor(e(1538)).dependencies("WalkthruStepsLoader, WalkthrusContainer, CurrentWalkthruData, InteractionManager, TimerManager, WalkthrusModule, Logger, SettingsValuesRetriever, CommonEvents, WalkthruStatePersister, WalkthruBranchPlayer, Consts, WalkthruBranchData, LibDestroyer, UserGuidContainer"),r.register("WalkthruStepsLoader").asCtor(e(1539)).dependencies("DataFixer, CommonUtils, StepUtils,SiteConfigManager, WalkthrusContainer"),r.register("WalkthruBranchPlayer").asCtor(e(1540)).dependencies("Logger, StepRetriever, WalkthrusModule, WalkthrusContainer, Lib, TimerManager, CommonEvents, Consts, CurrentWalkthruData, WalkthruStatePersister, ArrayUtils, WalkthruBranchData, CommonUtils"),r.register("WalkthruApi").asCtor(e(1541)).dependencies("WalkthrusContainer, SiteConfigManager, Consts, WalkMeVisibilityChecker, CommonEvents,SettingsValuesRetriever, LabelsContainer, Logger").asSingleton(),r.register("WalkthruLegacyExternalApi").asCtor(e(1542)).dependencies("WalkthrusModule, CurrentWalkthruData, WalkthrusContainer, WalkthruBranchPlayer, Logger"),r.register("WalkthruBranchData").asCtor(e(1543)),r.register("WalkthruBalloonButtonsEventsBinder").asCtor(e(1544)).dependencies("CurrentWalkthruData, Consts, WalkthrusModule, CommonEvents, WalkthruBranchPlayer, BalloonsContainer, LibDestroyer, FeaturesManager, BalloonButtonsEventsBinder"),r.register("WalkthruBalloonNotifier").asCtor(e(1545)).dependencies("BalloonUtils, Consts, UiUtils, TimerManager, Lib, CdnServer, BalloonButtonsEventsBinder,TopContainerProvider, CurrentStepUI, HostData, FramesetsUtils"),r.register("WalkthruPopupNotificationsService").asCtor(e(1546)).dependencies("PopupNotificationsService, WalkthruBalloonNotifier"),r.register("StepUtils").asCtor(e(1547)).dependencies("Consts"),r.register("WalkthruSurveyActivator").asCtor(e(1548)).dependencies("DeployableSurveyActivator, AuditStepsManager, StorageKeysConfigurations"),r.register("WalkthruSafeStartHandler").asCtor(e(1549)).dependencies("Consts, AuditStepsManager, WalkthruRedirectService, CurrentWalkthruData, WalkthruStatePersister, AuditSafeStartManager"),r.register("WalkthrusSiteConfigDataMigrator").asCtor(e(1550)).dependencies("WalkthrusContainer, WalkthrusModule, DataFixer"),r.register("DataFileWalkthruDataAppender").asCtor(e(1551)).dependencies("WalkthrusContainer, WalkthrusSiteConfigDataMigrator, DeployableTypes, DataFileDataLoader, LibInitializer, TutorialsManager"),r.register("EndUserWalkthruDataConverter").asCtor(e(1552)).dependencies("Consts, StepUtils, DeployablesManagerFactory, CommonUtils, ClientOrServerStorageManager, EndUserDataConverter"),r.register("WalkthrusDestroyer").asCtor(e(1553)).dependencies("WalkthrusModule, TriggersManager, WalkthruBalloonNotifier, WmInternals, Consts, AuditSourceProvider"),r.register("WalkthruJawsAccessibilityUtil").asCtor(e(1554)).dependencies("StepUtils, JawsAccessibilityUtil"),r.register("WalkthruEventDataAppender").asCtor(e(1555)).dependencies("CurrentWalkthruData"),r.register("WalkthruEventsInitializer").asCtor(e(1556)).dependencies("ApiEventRaisersContainer, WalkthruEventDataAppender"),r.register("WalkthruStartFailureHandler").asCtor(e(1557)).dependencies("CommonEvents, AuditSourceProvider, SettingsValuesRetriever, WalkthrusModule"),r.register("WalkthruActionsFactory").asCtor(e(1558)).dependencies("ActionsFactory, Lib, ClientOrServerStorageManager, Consts, ClientStorageManager, CommonEvents, WalkthruRedirectService, StepRetriever, WalkthrusContainer, CurrentWalkthruData, WalkthruStatePersister, WalkthrusModule, WalkthruBranchPlayer, DebuggerManager, TimerManager, Logger, ConditionCheckerFactory, CrossDomainManager, WalkthruStepsLoader, CommonUtils, JsonUtils"),r.register("WalkthruRedirectService").asCtor(e(1559)).dependencies("RedirectService, TimerManager, WalkthruStatePersister"),r.register("TriggersManager").asCtor(e(1560)).dependencies("TimerManager,FramesetsUtils,StepUtils,Logger,FeaturesManager,SiteConfigManager,ConditionTreeTraverser,CommonEvents,Consts,ClickTriggersListCreator,WalkthrusModule,CurrentWalkthruData,WalkthruStatePersister,WalkthruBranchPlayer,LibDestroyer,EventBinder,HostData,ConditionCheckerFactory, SettingsValuesRetriever, WalkthruOnBeforeUnloadHandler, BackButtonUtils"),r.register("BackButtonUtils").asCtor(e(1561)).dependencies("WalkthrusModule, Consts, CurrentWalkthruData, StepUtils"),r.register("PlayManager").asCtor(e(1562)).dependencies("FeaturesManager, Consts, WalkthrusModule, WalkthrusContainer, Logger"),r.register("BBCodeWalkthruActivator").asCtor(e(1563)).dependencies("InitiatorTypeToAppTypeMapper, CommonEvents, WalkthruStepsLoader, BBCodeDeployables, Consts"),r.register("BBCodeWalkthruSurveyActivator").asCtor(e(1564)).dependencies("CurrentWalkthruData, BBCodeDeployables, RunningDeployablesStopper, InitiatorTypeToAppTypeMapper,Consts"),r.register("WalkthruPopupStepElementFinderExtension").asCtor(e(1565)).dependencies("StepUtils, PopupStepElementProvider"),r.register("WalkthruActionStepElementFinderExtension").asCtor(e(1566)).dependencies("StepUtils, PopupStepElementProvider"),r.register("WalkthrusModuleInitializer").asCtor(e(1567)).dependencies("Lib, WalkthruOnBeforeUnloadHandler, DataFileWalkthruDataAppender, EndUserWalkthruDataConverter,AnchorTagsFixer, BBCodeWalkthruActivator, WalkthrusModule, RunningDeployablesStopper,BBCodeWalkthruSurveyActivator, WalkthrusDestroyer, DeployableTypes,WalkthruRunningState, WalkthruActionsFactory, WalkthruJawsAccessibilityUtil, WalkthruStateRestorer,DeployablesRestorer, WalkthruPopupStepElementFinderExtension, WalkthruActionStepElementFinderExtension,ElementFinderExtensionsProvider, WalkthruConditionFunctions, WalkthruConditionEvaluator,OwnershipManagerProvider, Consts, WalkthruOwnershipManager,WmInternals, WalkthruAutoStartHelper"),r.register("WalkthruOwnershipManager").asCtor(e(1568)).dependencies("CrossDomainManager, Consts, WalkthrusModule, WalkthruPassOwnershipDeterminator, WalkthrusContainer,CurrentWalkthruData, WalkthruStatePersister, StepRetriever, WalkMeInfo, WalkthruStateRestorer, Logger, PassOwnershipNextStepProvider, FeaturesManager, TimerManager, PreExecutionPassOwnershipWrapper, PassOwnershipManager"),r.register("PassOwnershipNextStepProvider").asCtor(e(1569)).dependencies("ClientStorageManager, Consts, WalkthrusContainer, UserGuidContainer"),r.register("WalkthruPassOwnershipDeterminator").asCtor(e(1570)).dependencies("Consts"),a.register([i.PLATFORM.Web,i.PLATFORM.MobileWeb,i.PLATFORM.Desktop],function(){r.register("WalkthruAutoStartHelper").asCtor(e(1571)).dependencies("DeployableTypes, WalkthrusContainer, WalkthrusModule, WalkthruPersistenceDataRetriever, Consts")}),r.register("WalkthruPersistenceDataRetriever").asCtor(e(1572)).dependencies("WalkthruStatePersister, Consts, CurrentWalkthruData"),r.register("WalkthruRunningState").asCtor(e(1573)).dependencies("WalkthruPersistenceDataRetriever, WalkthrusModule, Consts"),r.register("AnchorTagsFixer").asCtor(e(1574)).dependencies("HostData, WalkthruOnBeforeUnloadHandler"),r.register("WalkthruConditionEvaluator").asCtor(e(1575)).dependencies("CurrentWalkthruData, StepRetriever, ConditionEvaluator"),r.register("WalkthruConditionFunctions").asCtor(e(1576)).dependencies("Lib, ExternalConditionsHandlers, WalkthrusContainer, StepRetriever, WalkthrusModule, CurrentWalkthruData, Consts"),r.register("AuditWtsManager").asCtor(e(1577)).dependencies("DeployableTypes, EventSender, ReportInitiatorMapper"),r.register("AuditStepsManager").asCtor(e(1578)).dependencies("Logger,Consts,CommonUtils,EventSender, AuditSafeStartManager, StepActionToEventSenderStepActionNameMapper, SettingsValuesRetriever, StepActionToEventSenderActionAppTypeMapper, CommonEvents, PlayGuidGenerator"),r.register("WalkthruActionClickedEventBinder").asCtor(e(1579)).dependencies("ActionClickedEventBinder, Consts, SharedConsts, AuditStepsManager"),r.register("WalkthruStepShowerButtonsCalculator").asCtor(e(1580)).dependencies("ArrayUtils, SharedConsts"),r.register("WalkthruStepShower").asCtor(e(1581)).dependencies("Logger, Lib, JsonUtils, DataFixer, ComplexHtmlElementsProvider, PositionHelper,BalloonDrawerProvider, SiteConfigManager, BalloonsContainer, WalkthruStepShowerButtonsCalculator, DefaultPlaceHolderConfigsCreator, SharedConsts"),t.exports={init:function(){var t=r.get("IsInEditor"),n=r.get("AuditSourceProvider");r.get("WalkthrusModuleInitializer")[t.get()&&!n.isInPreviewMode()?"postDataFileLoaded":"init"]()}}},1530:function(t,n,e){"use strict";e.r(n),e.d(n,"TutorialsManager",function(){return a});var r,n=e(0),e=e(43),a=(r=e.DeployablesManager,Object(n.__extends)(i,r),i.prototype.activateById=function(t,n){WalkMeAPI.startWalkthruById({id:t,fromStep:0,playInitiator:n})},i.prototype.autoStartEnabled=function(){return!this.t.isTrainingInStartingMode()},i);function i(t,n,e){t=r.call(this,{deployables:[],lib:t,type:n.DEPLOYABLE_TYPE.Tutorial})||this;return t.t=e,t._name="Walkthru",t}},1531:function(t,n,e){!function(kt){t.exports=function(v,r,m,g,S,w,y,a,C,I,i,W,V,z,b,M,c,K,h,t,A,T,x,E,J,D,q,f,X,Y){var P=this,_=(P.setTutorials=function(t){e={};for(var n=0;n<t.length;n++)t[n].Steps&&r.fixSteps(t[n],m.get());g.setWalkthrus(t)},P.isTutorialPackageHidden=function(t){t=_.tutorialRunSettingsMap[t.TutorialId];return!!t&&t.isPackageHidden},P.canShowTutorial=function(t){if(0==t.IsVisible)return!1;for(var n,e=l(t,u.URL),r=!1,a=0;a<e.length;a++)if((n=e[a]).Type===u.URL?f.isLocationMatchString(n.Content):void w.error(new Error("Invalid condition type: "+n.Type))){r=!0;break}if(0<e.length&&!r)return!1;if(1==S.getSettingsValue(t.Settings,"DOCTEnabled",0)){var i=S.getSettingsValue(t.Settings,"DOCT","");if(""!=i)try{var o=_walkmeInternals.ctx.get("ConditionCheckerFactory").createOld({trackUIChange:!0,featureName:"Walk-Thru Segmenation",elementName:t.Name,ownerChain:{type:y.ELEMENT_OWNER_TYPE_NAMES.WT,id:t.Id}}).getCurrentEvaluationValueAndStopEvaluating(i);if(C.deprecatedRaiseEvent(y.EVENTS.Walkthrus.WtConditionEvaluated,t),!o)return C.deprecatedRaiseEvent(y.EVENTS.Walkthrus.CannotShowWt,t),!1}catch(t){}}return 0<l(t,u.FIRST_STEP_MUST_EXIST).length?0!=t.Steps.length&&(i=t.Steps[0],w.customerLog('First Step Condition for "'+(i.StepTitle||i.StepText)+', Walk-Thru "'+t.Name+'"'),v.findElement(i)):(C.deprecatedRaiseEvent(y.EVENTS.Walkthrus.CanShowWt,t),!0)},P.stopTutorial=function(t,n,e){C.deprecatedRaiseEvent(y.EVENTS.Walkthrus.WalkthruStopped,b.getCurrentStep()),s(),e||D.releaseBalloons(),b.state=y.WALKTHRU_STATE.NOT_RUNNING,h.removeOverlay();e=b.currentStep;b.currentStep=-1,t||M.storeStateInCookie(),_walkmeInternals.ctx.get("CrossDomainManager")&&_walkmeInternals.ctx.get("CrossDomainManager").get().enabled()&&_walkmeInternals.ctx.get("CrossDomainManager").get().reset(),n||d(b.getCurrentWalkthru(),e,y.SURVEY_START_EVENTS.WalkThruExited)},P.startNewTutorial=function(s,c,f,p){var d=g.getWalkthruByIndex(s);return _walkmeInternals.ctx.get("WalkthruStepsLoader").afterStepsLoaded(d&&d.TutorialId,function(){try{w.customerLog("startNewTutorial : Index = "+s+". From Step = "+c+" testMode: "+f),h.fixFlash(),Z(s);var t=!1;if(_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayInitiator=p,c=I.defaultValue(c,0),f=I.defaultValue(f,!1),_walkmeInternals.ctx.get("FlowsPlayer").abort(),!f){if(b.state!=y.WALKTHRU_STATE.WAITING_FOR_OWNERSHIP&&!_walkmeInternals.ctx.get("WalkthruOwnershipManager").walkthruStarted(s,c))return!0;O(!0,!0),_walkmeInternals.ctx.get("CrossDomainManager").get().enabled()||nt(),_walkmeInternals.ctx.get("WalkthruBalloonNotifier").closePopup()}C.deprecatedRaiseEvent(y.EVENTS.Walkthrus.WalkthruStarted,d);var n,e=[],r=c,a=0==(c=_walkmeInternals.ctx.get("PlayManager").findFirstStep(s,c,e));if(0<c&&!f?(n=K.get())==y.SOURCES.play||n==y.SOURCES.preview?$(s,r,c,y.STEP_STATUS.SkippedStartedFromBiggerStep):(t=!0,at(s,0,c,y.STEP_STATUS.SkippedStartedFromBiggerStep)):0==c&&0<(c=L(s))&&!f&&(t=!0,at(s,0,c,y.STEP_STATUS.SkippedByTutorialCondition)),!j(s,!1)&&c<0){if(f)return!1;_walkmeInternals.ctx.get("AuditStepsManager").createPlayGuidIfNeeded(d.TutorialId);var i={tutorialIndex:s,wt:d,checkStepExistsTrace:e};if(!_walkmeInternals.ctx.get("DeployableSafeStartExecuter").handleSafeStart(Y,d,i)){for(var o=0;o<e.length;o++)_walkmeInternals.ctx.get("AuditStepsManager").auditStep(d,d.Steps[e[o].stepIndex],e[o].stepStatus),$(s,e[o].stepIndex,e[o].stepIndex+1,e[o].stepStatus);var u=e[e.length-1].stepIndex,l=d;_walkmeInternals.ctx.get("WalkthruStartFailureHandler").handle(l,u),O()}}else{if(f)return!0;tt(s,c,a,t?_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID:void 0,p,r)}}catch(t){return w.error(t),!1}return C.deprecatedRaiseEvent("WtHasGuid",d,{playGuid:_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID}),C.raiseEvent(y.EVENTS.Walkthrus.WalkthruGuidGenerated,{playGuid:_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID}),!0})},P.tutorialFinished=it,P.executeTutorialNextStep=H,P.postWelcomeStep=ht,P.executeCurrentStep=Q,P.executePreviousStep=function(){b.state=y.WALKTHRU_STATE.RUNNING,D.releaseBalloons(function(){P.stepWasCompleted(!1),b.currentStep=b.lastBackButtonStepIndex-1,P.executeTutorialNextStep()})},P.getAction=R,P.getSiteConfigByTutorialId=function(t){return _.tutorialRunSettingsMap[t]?_.tutorialRunSettingsMap[t].siteConfig:m.get()},P.isTutorialIdsExist=function(t){t=a.map(t,g.getWalkthruIndexByWalkthruId),t=a.inArray(-1,t);return null==t||-1==t},P.isStepTrigger=N,P.terminateTutorial=function(){b.stepPlayStack=[],D.releaseBalloons(),s(),C.raiseEvent("WalkthruAborted")},P.checkTutorialSkipFirstStepCondition=L,P.fillMissingStepAudits=at,P.getNextStepIncludingSplit=ut,P.releaseEvents=st,P.stepWasCompleted=ft,P.getPlayConditionMode=dt,P.checkPlayStepCondition=function(t){var n=S.getSettingsValue(t.Settings,"skipStepCond","");if(0<n.length)try{return!_walkmeInternals.ctx.get("ConditionEvaluator").evaluate(n)}catch(t){return!0}if(1!=S.getSettingsValue(t.Settings,"PSCTEnabled",0))return!E.isActionStep(t)||"never"!=S.getSettingsValue(t.Settings,"whenToFire","");n=S.getSettingsValue(t.Settings,"PSCT","");if(""==n)return!0;try{var e=_walkmeInternals.ctx.get("ConditionTreeEvaluator").evaluate(n);return C.deprecatedRaiseEvent(y.EVENTS.Walkthrus.StepHasPlayCondition,t,{playGUID:_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID}),e}catch(t){return!1}},P.executeTutorialStep=lt,P.checkIfStepExistsWithSkippables=G,P.isStepPlayable=function(t,n){return G(t,n,void 0,void 0,void 0,y.CHECK_STEP_MODE.Normal)==n},P.checkTutorialRedirectCondition=j,P.loadTutorial=tt,P.releaseBalloonsTimeouts=s,P.resetState=O,P.cleanCurrentStepResources=function(){if(n){for(var t=n.length-1;0<=t;t--)n[t].cleanResources();n=[]}},P.addCurrentStepResource=function(t){n.push(t)},P.setMember=function(t,n){_[t]=n},P.removeCrossUsersState=nt,P.getMatchedSurvey=rt,P.getWalkthruSurveyFrequency=et,{tutorialRunSettingsMap:{},dontContinueTutorial:!1,executeTutorialNextStepNotFinished:!1}),u={URL:0,FIRST_STEP_MUST_EXIST:1,AUTO_START:2,REDIRECT:3,SKIP_FIRST_STEP:4},o="PSCTMode";var k="stepCheck",e={},B=[],U=!1,F=0,n=[];function R(t){var n;return null!=e[t.Id]?e[t.Id]:(n=S.getSettingsValue(t.Settings,"action",null))?(e[t.Id]=_walkmeInternals.ctx.get("ActionsFactory").get(n.actionType,n.arguments,y.STEP_PLAY_INITIATOR_ENUM.STEP,t),e[t.Id]):(w.customerLog("No action core. aborting..."),null)}function Z(t){var t=g.getWalkthruByIndex(t);_.tutorialRunSettingsMap[t.TutorialId]&&(t=_.tutorialRunSettingsMap[t.TutorialId].siteConfig)&&m.set(t)}function N(t,n){if("number"==typeof t)return t==n;for(var e=t.split(","),r=0;r<e.length;r++)if(n+""==e[r])return!0;return!1}function $(t,n,e,r){for(var a,i=n;i<e;i++)r!=y.STEP_STATUS.SkippedByActionStep&&(a=g.getWalkthruByIndex(t),C.deprecatedRaiseEvent(y.EVENTS.Walkthrus.NewSkippedStep,a.Steps[i]))}function l(t,n){var e=Array();if(!t.Conditions)return e;for(var r=0;r<t.Conditions.length;r++)t.Conditions[r].Type!=n||null!=t.Conditions[r].IsEnabled&&1!=t.Conditions[r].IsEnabled||e.push(t.Conditions[r]);return e}function L(t){for(var n=l(g.getWalkthruByIndex(t),u.SKIP_FIRST_STEP),e=0;e<n.length;e++){var r,a=n[e];if(f.isLocationMatchString(a.Content))return r=a.ExtraData,w.customerLog("The walk-thru has a skip step condition ("+a.Content+") which is true. Skipping to: "+(a=r?r-1:1)),a}return 0}function j(t,n){var t=l(g.getWalkthruByIndex(t),u.REDIRECT);return 0!=t.length&&(t=t[0].Content,n?i.redirect(t):i.canRedirect(t))}function tt(t,n,e,r,a,i){try{_walkmeInternals.ctx.get("WalkmeVisibleReporter").report(),b.stepAppearanceIndex=0;var o=g.getWalkthruByIndex(t),u=(C.deprecatedRaiseEvent(y.EVENTS.Walkthrus.WalkthruLoaded,o),Z(t),_walkmeInternals.ctx.get("ContentsManager").removeContent(),r=I.defaultValue(r,c.generateNewPlayGuid(o.TutorialId)),e=I.defaultValue(e,!0),n=I.defaultValue(n,0),null==i?n:i);p(t,n=0===n?L(t):n,r,a,[],[],[]);try{a=a||{type:y.STEP_PLAY_INITIATOR_ENUM.NONE},_walkmeInternals.ctx.get("AuditWtsManager").auditWalkthruStart(o,a,u,n,r)}catch(t){w.error(t)}K.get()!=y.SOURCES.play&&_walkmeInternals.ctx.get("WalkMeGoalsManager").startWatchingDeployable(o,r),ht(t)}catch(t){w.error(t)}}function p(t,n,e,r,a,i,o){s(),D.releaseBalloons(),b.state=y.WALKTHRU_STATE.RUNNING,b.currentWalkthru=t,b.currentStep=n-1,b.stepPlayHistory=a,b.stepPlayStack=i,b.stepCompletedHistory=o,_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID=e,_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayInitiator=r,M.storeStateInCookie()}function s(){W.stopTimeoutsArray("playTimeouts"),_.executeTutorialNextStepNotFinished=!1}function d(t,n,e){var r,a,i;t&&t.Settings.survey&&(r=t.Settings.survey.surveyId,(a=et(t.Settings.survey,e))&&(i={objectId:t.Id,type:y.STEP_PLAY_INITIATOR_ENUM.WALKTHRU},_walkmeInternals.ctx.get("WalkthruSurveyActivator").activateSurvey(t,e,i,r,a,void 0,n)))}function O(t,n){b.currentWalkthru=-1,b.state=y.WALKTHRU_STATE.NOT_RUNNING,b.currentStep=-1,b.splitPointStack=[],b.stepPlayHistory=[],b.stepPlayStack=[],b.stepCompletedHistory=[],b.lastBackButtonStepIndex=-1,_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID="",_.executeTutorialNextStepNotFinished=!1,e={},_.dontContinueTutorial=!1,U=!1,t||(_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayInitiator=null),n||M.storeStateInCookie()}function nt(){for(var t=_walkmeInternals.ctx.get("UserGuidContainer").getAllUserGuids(),n=0;n<t.length;n++){var e=t[n];_walkmeInternals.ctx.get("ClientStorageManager").removeData(y.STORAGE_KEYS.WALKTHRU_PERSISTENCE_DATA,e)}}function et(t,n){t=rt(t,n);return t&&(t.repeat||"visit")}function rt(t,n){if(t.startCondition==n||t.startCondition==y.SURVEY_START_EVENTS.Both)return t}function at(t,n,e,r){for(var a=n;a<e;a++){var i=g.getWalkthruByIndex(t);_walkmeInternals.ctx.get("AuditStepsManager").auditStep(i,i.Steps[a],r)}}function it(t){D.releaseBalloons(),b.state=y.WALKTHRU_STATE.NOT_RUNNING,M.storeStateInCookie();var n=0<b.splitPointStack.length?b.splitPointStack.pop():null,t={hadSplit:!!n,finishAfterRefresh:!!t},e=b.getCurrentWalkthru();C.deprecatedRaiseEvent(y.EVENTS.Walkthrus.WalkthruCompleted,e,t),h.removeOverlay(),_walkmeInternals.ctx.get("TodoListManager").updateDeployableCompleted(e.TutorialId,y.DEPLOYABLE_TYPE.Tutorial),d(e,b.currentStep,y.SURVEY_START_EVENTS.WalkThruCompleted),n?(t=g.getWalkthruByIndex(n.tutorialIndex),C.deprecatedRaiseEvent("switchToWalkthru",t.Id),C.deprecatedRaiseEvent("BackFromBranch",t),p(n.tutorialIndex,n.stepIndex,n.playGuid,n.playInitiator,n.stepPlayHistory,n.stepPlayStack,n.stepCompletedHistory),v.executeTutorialNextStep()):(b.stepPlayStack=[],_walkmeInternals.ctx.get("CrossDomainManager").get().loseOwnership())}function H(){w.customerLog("executeTutorialNextStep - Waiting for all frames to load before executing.",3),t.waitForFramesToLoad().then(ot)}function ot(){if(_.executeTutorialNextStepNotFinished)w.customerLog("executeTutorialNextStepNotFinished - skipping this executeTutorialNextStep",5);else{if(U)return U=!1,w.customerLog("executeTutorialNextStep: waiting for other window",5),w.customerLog("Waiting for other window..."),void function e(){_walkmeInternals.ctx.get("ClientStorageManager").refreshGetData(),W.playSetTimeout(function(){var t=_walkmeInternals.ctx.get("ClientStorageManager"),n=t.keysConfig.walkthru.waitForOtherWindow;1==t.getData(n.key,void 0,b.getCurrentWalkthru().userGuid)?(w.customerLog("Other window finished. Resuming walk-thru here."),t.saveData(n.key,0,n.expiry,b.getCurrentWalkthru().userGuid),_walkmeInternals.ctx.get("WalkthruStateRestorer").restoreCrossUsersState()):e()},500)}();var t;_.dontContinueTutorial?w.customerLog("executeTutorialNextStep: not executing, dontContinueTutorial=true",5):b.getCurrentWalkthru().Steps.length-1==b.currentStep?it():(_.executeTutorialNextStepNotFinished=!0,t=null==(t=ut())?0:t.Delay,w.customerLog(I.formatString("Next step including split is: {0} seconds",t),5,y.LOG_FEATURES.BALLOON),W.playSetTimeout(function(){function t(){_.executeTutorialNextStepNotFinished=!1,Q()}b.currentStep++,_walkmeInternals.ctx.get("WalkthruStepsLoader").afterStepsLoaded(b.getCurrentWalkthru().Id,function(){0<b.currentStep&&!N(b.getPreviousStep().End,y.WALKTHRU_STEP_TRIGGER.NOTHING)?D.releaseBalloons(t):t()})},1e3*t))}}function ut(){return function t(n,e,r){var a=g.getWalkthruByIndex(n);return a.Steps.length>e+1?((a=a.Steps[e+1]).TutorialIndex=n,a):(e=b.splitPointStack).length>r?t((n=e[e.length-1-r]).tutorialIndex,n.stepIndex-1,r+1):null}(b.currentWalkthru,b.currentStep,0)}function lt(e){function t(t){w.customerLog(t,5,y.LOG_FEATURES.BALLOON)}var n=I.getTimer(t),r={},a=(F!=e.Id&&b.stepAppearanceIndex++,e.playNumber=b.stepAppearanceIndex,F=e.Id,C.raiseEvent(y.EVENTS.Walkthrus.StepExecuting,{playNum:b.stepAppearanceIndex}),g.getWalkthruByIndex(b.currentWalkthru)),a=I.formatString("Processing step # {0} . Step title: {1}. Walkthru: {2}",e.StepIndex+1,e.StepTitle,a.Name),a=(w.customerLog(a),C.deprecatedRaiseEvent(y.EVENTS.Walkthrus.StepStarted,e),T.isFeatureEnabled("highPerf")||_walkmeInternals.ctx.get("AnchorTagsFixer").fixAnchorTagsOnBeforeUnload(),b.state!=y.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT&&b.state!=y.WALKTHRU_STATE.WAITING_FOR_ELEMENT&&b.state!=y.WALKTHRU_STATE.WAITING_FOR_CONDITION&&(a=E.isActionStep(e)?y.STEP_STATUS.Shown:y.STEP_STATUS.SupposedToShow,_walkmeInternals.ctx.get("AuditStepsManager").auditStep(b.getCurrentWalkthru(),e,a)),dt(e)),i=P.checkPlayStepCondition(e);if(!i&&(a==y.playConditionModes.PLAY_CONDITION||a==y.playConditionModes.BOTH&&b.state!=y.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT))return w.customerLog("Play step condition is false. Skipping step."),_walkmeInternals.ctx.get("AuditStepsManager").auditStep(b.getCurrentWalkthru(),e,y.STEP_STATUS.SkippedByCondition),C.deprecatedRaiseEvent(y.EVENTS.Walkthrus.StepSkipped,e),void H();if(pt(e)){a=G(b.currentWalkthru,e.StepIndex,0,1,void 0,y.CHECK_STEP_MODE.Normal);if(-1==a)return w.customerLog("Keep looking for element after popup."),C.deprecatedRaiseEvent(y.EVENTS.Walkthrus.LookingForStepElement,e,{playGUID:_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID}),b.state=y.WALKTHRU_STATE.WAITING_FOR_ELEMENT,W.playSetTimeout(function(){Q()},500),void M.storeStateInCookie();if(-2==a||-5==a)return w.customerLog(-5==a?"Loop detecetd":"Play condition isn't met, skipping the popup."),_walkmeInternals.ctx.get("AuditStepsManager").auditStep(b.getCurrentWalkthru(),e,y.STEP_STATUS.SkippedNotFound),C.deprecatedRaiseEvent(y.EVENTS.Walkthrus.StepSkipped,e),void H()}var o,u,l,s,c,f=void 0;if(i||b.state!=y.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT?(a={},i=I.getTimer(t),w.customerLog("Step - Play Condition"),f=v.findElement(e,null,a,void 0,void 0,{type:y.ELEMENT_OWNER_TYPE_NAMES.STEP,id:e.Id,stickyType:e.Settings.sticky,owner:{type:y.ELEMENT_OWNER_TYPE_NAMES.WT,id:b.getCurrentWalkthru().Id}}),r.FETime=i("Done looking for sticky step named "+(e.StepTitle||e.StepText)+" with id "+F),e.Score=a.score):(w.customerLog("Sticky PlayCondition isn't met."),f=!1),f){!0!==f&&(w.customerLog("Element found:"),w.customerLog(f),(i=J.getComplexHtmlElements(e,f))&&(f=i.elements,p=i.parentElement)),C.deprecatedRaiseEvent(y.EVENTS.Walkthrus.StepElementFound,e),C.raiseEvent("BeforeNewStepShown");var p,d,h,k,a=0<b.stepPlayStack.length?b.stepPlayStack[b.stepPlayStack.length-1]:null,i=a?A.getStepById(a).StepIndex:null,a=e.Id;if(b.stepPlayHistory.push(a),(0<b.stepPlayStack.length?b.stepPlayStack[b.stepPlayStack.length-1]:null)!=a&&b.stepPlayStack.push(a),S.getSettingsValue(e.Settings,"fake",!1))return w.customerLog("This is a fake step. Continue to next step."),M.storeStateInCookie(),_walkmeInternals.ctx.get("AuditStepsManager").auditStep(b.getCurrentWalkthru(),e,y.STEP_STATUS.FakeFound),C.deprecatedRaiseEvent(y.EVENTS.Walkthrus.FakeStep,e),void H();b.state=y.WALKTHRU_STATE.RUNNING,E.isActionStep(e)?W.playSetTimeout(function(){R(e).doAction(),C.deprecatedRaiseEvent(y.EVENTS.Walkthrus.StepPerforming,e)},100):(a={type:y.ELEMENT_OWNER_TYPE_NAMES.step,id:e.Id,owner:{type:y.ELEMENT_OWNER_TYPE_NAMES.WT,id:b.getCurrentWalkthru().Id}},i=_walkmeInternals.ctx.get("TriggersManager").handle(f,e,b.currentStep,b.currentWalkthru,i,a),d=i.executeNextStep,a=i.clearElementEventsFuncs,i=i.buttons,S.getSettingsValue(e.Settings,"waitOtherWindow",!1)&&(U=!0),r.logicTime=n("Finished pre-balloon logic"),n=e.StepTitle,h=e.StepText,e.DesignTemplateId||e.DesignTemplatePlaceholderConfigs&&0!=e.DesignTemplatePlaceholderConfigs.length||(e.DesignTemplatePlaceholderConfigs=X.createPlaceHolderConfigs(kt.get("SharedConsts").templateEntityType.balloon,e.StepTitle,e.StepText)),(k=_walkmeInternals.ctx.create("Balloon",{element:f,parentElement:p,forceEmbedBalloonInIframe:!1,positionHelper:V,dontShowIoBalloon:!T.isFeatureEnabled("multSpot")&&(s=p=e,1<(c=b.stepPlayHistory).length&&(l=g.getWalkthruByIndex(b.currentWalkthru),s=A.getStepById(c[c.length-2],l)),N(p.End,y.WALKTHRU_STEP_TRIGGER.NOTHING)||N(s.End,y.WALKTHRU_STEP_TRIGGER.NOTHING)),isFirstStep:function(){var t=b.stepPlayHistory;if(t.length<2)return!0;for(var n=0;n<t.length-1;n++){var e=g.getWalkthruByIndex(b.currentWalkthru),e=A.getStepById(t[n],e);if(!I.isDefined(e.Settings.action))return!1}return!0}(),stepSettings:e.Settings,visibilityFilter:V.getVisibleFilterKey(e),text:{title:n,content:h,subText:(c=m.get().StepsInfoText,l=ct(),s=l.totalVisibleSteps,l=l.passedVisibleSteps,c=T.isFeatureEnabled("floatingsubtext")?(c=c.replace("{0}",y.SUBTEXT_CURRENT_START+l+y.SUBTEXT_CURRENT_END)).replace("{1}",y.SUBTEXT_TOTAL_START+s+y.SUBTEXT_TOTAL_END):(c=c.replace("{0}",l)).replace("{1}",s))},end:e.End,position:e.Position,buttons:{next:i.nextButton,done:i.doneButton,back:0<=i.backButtonStepIndex},data:{balloonEntityId:e.Id,containerEntityId:e.TutorialId,type:e.Type},configuration:e.Configuration,logger:w,drawer:q.getBalloonDrawer(e.Configuration,e),siteConfig:m.get(),bindButtonsFunc:_walkmeInternals.ctx.get("WalkthruBalloonButtonsEventsBinder").addButtonEventsToBalloon,placeholderConfigurations:e.DesignTemplatePlaceholderConfigs,placeholderVariableValues:ct(),initiatorData:{initiator:e,type:y.STEP_PLAY_INITIATOR_ENUM.STEP}})).onDestroy(function(){st(f,elementEvents)}),k.setReleaseEvents(a),z.add(k),M.storeStateInCookie(),_walkmeInternals.ctx.get("AuditStepsManager").auditStep(b.getCurrentWalkthru(),e,y.STEP_STATUS.Shown),T.isFeatureEnabled("jawsAccessibility")&&(i=n||h,n&&h&&(i+=". "+h),i&&f.attr("alt",i)),k.Show(!0,function(t,n){wmjQuery.extend(!0,r,t),C.raiseEvent(y.EVENTS.Walkthrus.ShowStepBalloon,{balloonDiv:n,step:e});t={Element:f,Balloon:n};C.deprecatedRaiseEvent(y.EVENTS.Walkthrus.StepShown,e,t),C.deprecatedRaiseEvent(y.EVENTS.Walkthrus.StepPerforming,e,t),k.SetTimeoutOn(function(){!function(){switch(b.state){case y.WALKTHRU_STATE.WAITING_FOR_ELEMENT_EVENT:case y.WALKTHRU_STATE.WAITING_FOR_NEXT_BUTTON_CLICK:case y.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE:return 1;default:return}}()||(I.getSettingsValue(b.getCurrentStep().Settings,"sticky",0)?(w.customerLog("Sticky - keep looking for element.",5),D.releaseBalloons(),b.state=y.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT,Q()):b.getCurrentStep().IsSkippable?(_.dontContinueTutorial=!1,w.customerLog("Skippable - continue to next step."),H()):b.state!=y.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE&&(w.customerLog("Stopping walk-thru."),D.releaseBalloons(),b.state=y.WALKTHRU_STATE.PAUSED,C.raiseEvent("WalkthruAborted"),C.raiseEvent("WalkthruStopped")))}),d&&(ft(),H())}),S.getSettingsValue(e.Settings,"isSelfExecuting",!1)&&(o=e,u=f,W.libSetTimeout(function(){var t;switch((t=o.End.split(/,/))[0]==y.WALKTHRU_STEP_TRIGGER.NEXT_BUTTON&&1<t.length?I.getInt(t[1]):I.getInt(t[0])){case y.WALKTHRU_STEP_TRIGGER.CLICK:w.customerLog("Self Executed Step - Trigger: Click",3),x.click(u);break;case y.WALKTHRU_STEP_TRIGGER.HOVER:w.customerLog("Self Executed Step - Trigger: Hover",3),x.hover(u);break;case y.WALKTHRU_STEP_TRIGGER.KEY_PRESSED:w.customerLog("Self Executed Step - Trigger: Text Input",3),x.text(u,o.Settings.selfExecuteText,void 0,void 0,o);break;case y.WALKTHRU_STEP_TRIGGER.SELECT_VALUE:var n=o.Settings.complexHtml&&o.Settings.complexHtml.val;n?(x.select(u,n),w.customerLog("Self Executed Step - Trigger: Select Value",3)):w.customerLog("SKIPPED Self Executed Step - Trigger: Select Any - not supported",3);break;default:w.customerLog("SKIPPED Self Executed Step - Trigger not supprted",3),_.dontContinueTutorial=!1,H()}},1e3*o.Settings.reactionTime||y.DEFAULT_REACTION_TIME)))}else w.customerLog("Element not found."),C.deprecatedRaiseEvent(y.EVENTS.Walkthrus.StepElementNotFound,e,{playGUID:_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID}),b.state==y.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT?(w.customerLog("Step was sticky. Keep looking for the element."),C.deprecatedRaiseEvent(y.EVENTS.Walkthrus.WaitingForStickyStep,e),b.state=y.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT,W.playSetTimeout(function(){Q()},500),M.storeStateInCookie()):e.IsSkippable||S.getSettingsValue(e.Settings,"skipNotExists",!1)?(E.isActionStep(e)?(w.customerLog("Action step isn't valid. Skipping to next step."),_walkmeInternals.ctx.get("AuditStepsManager").auditStep(b.getCurrentWalkthru(),e,y.STEP_STATUS.NonValidActionStep)):(w.customerLog("Skippable step. Skip to next step."),_walkmeInternals.ctx.get("AuditStepsManager").auditStep(b.getCurrentWalkthru(),e,y.STEP_STATUS.SkippedNotFound)),C.deprecatedRaiseEvent(y.EVENTS.Walkthrus.StepSkipped,e),H()):(w.customerLog("Keep looking for the element."),C.deprecatedRaiseEvent(y.EVENTS.Walkthrus.LookingForStepElement,e,{playGUID:_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID}),b.state=y.WALKTHRU_STATE.WAITING_FOR_ELEMENT,W.playSetTimeout(function(){Q()},500),M.storeStateInCookie())}function st(t,n){for(var e=0;e<n.length;e++)t.unbind(n[e]+".mt");return!1}function ct(){for(var t,n=g.getWalkthruByIndex(b.currentWalkthru).Steps,e=0,r=0,a=0;a<n.length;a++)(t=n[a]).Type==y.STEP_TYPE.Action||parseInt(S.getSettingsValue(t.Settings,"isInvisible",0))||parseInt(S.getSettingsValue(t.Settings,"fake",0))||(e++,a<=b.currentStep&&r++);return{totalVisibleSteps:e,passedVisibleSteps:r}}function ft(t){t=I.defaultValue(t,!0);var n,e=b.getCurrentStep();C.deprecatedRaiseEvent(y.EVENTS.Walkthrus.StepCompleted,e),b.stepCompletedHistory.push(e.Id),t?(_walkmeInternals.ctx.get("AuditStepsManager").auditStep(b.getCurrentWalkthru(),e,y.STEP_STATUS.Performed),S.getSettingsValue(e.Settings,"resumeOtherWindow",!1)&&(n=(t=_walkmeInternals.ctx.get("ClientStorageManager")).keysConfig.walkthru.waitForOtherWindow,t.saveData(n.key,1,n.expiry,b.getCurrentWalkthru().userGuid))):_walkmeInternals.ctx.get("AuditStepsManager").auditStep(b.getCurrentWalkthru(),e,y.STEP_STATUS.MovedBack)}function pt(t){return t.Type==y.STEP_TYPE.Popup&&1==S.getSettingsValue(t.Settings,"popup-play-condition",0)}function dt(t){return S.getSettingsValue(t.Settings,o,y.playConditionModes.PLAY_CONDITION)}function ht(t){-1==b.currentStep&&j(t,!0)||H()}function G(l,s,c,f,p,d,h){return _walkmeInternals.ctx.get("ElementFinder").wrapSession(function(){function t(t,n){var e=n;if(B&&0!=B.length){for(var r,a=[];0<B.length&&(r=B.pop()).id!=e;)a.push(r);if(0<a.length)for(;0<a.length;)B.push(a.pop())}return w.customerLog("returned checking "+s+" ("+i.Id+") result: "+t,5,k),t}var n=g.getWalkthruByIndex(l),i=n.Steps[s],e=(f=I.defaultValue(f,1),c=I.defaultValue(c,0),function(t){for(var n=0;n<B.length;n++)if(B[n].id==t)return!0;return!1}(i.Id));if(w.customerLog("Checking if step index "+s+" ("+i.Id+") can be played. looped: "+e+" on mode:"+d,5,k),B.push({id:i.Id,mode:d}),e)return t(-5,i.Id);var r,e=!0,a=(dt(i)!=y.playConditionModes.STICKY_CONDITION&&(e=P.checkPlayStepCondition(i)),S.getSettingsValue(i.Settings,"fake",!1)),o=S.getSettingsValue(i.Settings,"skipNotExists",!1)||i.IsSkippable||!e||a,u=o?e?y.STEP_STATUS.SkippedNotFound:y.STEP_STATUS.SkippedByCondition:y.STEP_STATUS.SupposedToShow;return p&&p.push({stepIndex:s,stepStatus:u}),e&&!a&&w.customerLog("Step - Find Element "+(h||"")),e&&!a&&v.findElement(i,void 0,void 0,void 0,void 0,{type:y.ELEMENT_OWNER_TYPE_NAMES.step,id:i.Id,stickyType:i.Settings.sticky,owner:{type:y.ELEMENT_OWNER_TYPE_NAMES.WT,id:n.Id}})?E.isActionStep(i)?t(function(t){var n=R(t);if(n.getGoToData){var e=n.getGoToData(),e=G(e.tutorialIndex,e.stepIndex,c,f,p,y.CHECK_STEP_MODE.Normal);if(e<0)return e}else if("stopWt"==n.type)return-2;return t.StepIndex}(i),i.Id):E.isPopupStep(i)?t(pt(u=i)&&1==f?g.getWalkthruByIndex(l).Steps.length>u.StepIndex?(e=G(l,u.StepIndex+1,c,f,p,y.CHECK_STEP_MODE.Normal))<0?e:u.StepIndex:void 0:u.StepIndex,i.Id):t(s,i.Id):(a=s+f,o?a<0?t(-2,i.Id):a==n.Steps.length?(e=b.splitPointStack).length>c?(r=G((u=e[e.length-1-c]).tutorialIndex,u.stepIndex,c+1,f,p,y.CHECK_STEP_MODE.Normal),w.customerLog("Checking if step "+s+" ("+i.Id+") can be played. reached last step",5,k),t(r,i.Id)):t(-2,i.Id):(w.customerLog("Checking if step "+s+" ("+i.Id+") can be played. Skipping to: "+a,5,k),t(r=G(l,a,c,f,p,y.CHECK_STEP_MODE.Normal),i.Id)):t(-1,i.Id))})}function Q(){var t=b.getCurrentStep();_walkmeInternals.ctx.get("ElementFinder").wrapSession(function(){lt(t)})}_walkmeInternals.ctx.get("WmInternals").on(y.EVENTS.Flows.BeforeFlowStarted,function(){nt()})}}.call(this,e(2))},1532:function(t,n){t.exports=function(i){function e(t,n){t=i.getWalkthruIndexByWalkthruId(t);if(-1<t){n=r(n,i.getWalkthruByIndex(t));if(n)return n}return null}function r(t,n){if(n)return o(t,n);for(var e=i.getWalkthrus(),r=0;r<e.length;r++){var a=o(t,e[r]);if(a)return a}return null}function o(t,n){for(var e=n.Steps,r=0;r<e.length;r++)if(e[r].Id==t)return e[r];return null}this.getStepByWalkthruAndStepIds=e,this.getStepById=r,this.getStepIndex=function(t,n){n=e(n,t);return n?n.StepIndex:-1}}},1533:function(t,n){t.exports=function(t,n,e,r,a,i,o){this.register=function(){o.register(l)};var u=!(this.setIgnoreNextBeforeUnload=function(t){u=t});function l(){i.isEmpty()&&(t.customerLog("onbeforeunload called",1),u?u=!1:(n.setMember("dontContinueTutorial",!0),e.pauseAllTimeouts(),r.get().enabled()?r.get().loseOwnership(!1,!0):a.isFeatureEnabled("noUnload")&&e.setWalkmeTimeout(function(){n.setMember("dontContinueTutorial",!1),e.resumeAllTimeouts()},3e3)))}}},1534:function(t,n){t.exports=function(){var t=this,r=(t.getWalkthrus=function(){return r},t.setWalkthrus=function(t){r=t},t.getWalkthruByIndex=e,t.getWalkthruById=function(t){for(var n=0;n<r.length;n++)if(r[n].TutorialId==t)return r[n];return null},t.getWalkthruIndexByWalkthruId=function(t){for(var n=-1,e=0;e<r.length;e++)if(r[e].TutorialId==t){n=e;break}return n},t.getStepByIndex=function(t,n){t=e(t);if(t&&t.Steps[n])return t.Steps[n]},[]);function e(t){return r[t]}}},1535:function(t,n){t.exports=function(t,n){var e=this;function r(){return t.getWalkthruByIndex(e.currentWalkthru)}function a(t){var n=r();return n&&n.Steps&&n.Steps[t]}e.currentWalkthru=-1,e.currentStep=-1,e.stepAppearanceIndex=0,e.splitPointStack=[],e.stepPlayHistory=[],e.stepPlayStack=[],e.stepCompletedHistory=[],e.lastBackButtonStepIndex=-1,e.getCurrentWalkthru=r,e.getCurrentStep=function(){return a(e.currentStep)},e.getPreviousStep=function(){return a(e.currentStep-1)},e.getNextStep=function(){return a(e.currentStep+1)},e.getStep=a,e.state=n.WALKTHRU_STATE.NOT_RUNNING}},1536:function(t,n){t.exports=function(e,r){this.shouldKeepOverlay=function(){var t,n=e.getCurrentStep();return r.isSpotlightStep(n)&&r.isPopupStep(n)&&(n=e.getPreviousStep(),t=e.getNextStep(),r.isPopupStep(n)||r.isPopupStep(t))}}},1537:function(t,n){t.exports=function(l,s,e,r,c,f,p){this.storeStateInCookie=function(){var t=void 0,n=void 0,e=void 0,r=void 0,a=c.getCurrentWalkthru(),i=a?a.TutorialId:-1,o=_walkmeInternals.ctx.get("UserGuidContainer").getUserGuid(),u=s.getCurrentInteractionGuid(),i=(c.state==l.WALKTHRU_STATE.RUNNING||c.state==l.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE?(t=c.currentStep+1,a.Steps.length<=c.currentStep+1&&(n=1)):c.state==l.WALKTHRU_STATE.WAITING_FOR_SPLIT?(t=c.currentStep,e=f.splitTutorialIds,r=f.splitStartFromStepId):t=c.currentStep,a=t,t=n,n=e,e=r,r=u,(u={})[d.CURRENT_TUTORIAL_COOKIE_NAME]=i,u[d.CURRENT_STATE_COOKIE_NAME]=c.state,u[d.CURRENT_STEP_COOKIE_NAME]=a,u[d.CURRENT_STEP_PLAY_NUMBER_COOKIE_NAME]=c.stepAppearanceIndex,u[d.CURRENT_PLAY_GUID_COOKIE_NAME]=_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID,u[d.CURRENT_PLAY_INITIATOR_COOKIE_NAME]=_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayInitiator,u[d.SPLIT_POINT_COOKIE_NAME]=c.splitPointStack,u[d.TUTORIAL_FINISHED_COOKIE_NAME]=t,u[d.STEP_PLAY_HISTORY_COOKIE_NAME]=c.stepPlayHistory,u[d.SPLIT_TUTORIAL_IDS_COOKIE_NAME]=n,u[d.SPLIT_START_FROM_STEP_COOKIE_NAME]=e,u[d.INTERACTION_GUID_COOKIE_NAME]=r,p.raiseEvent("SavingPersistenceData",u),u),a=_walkmeInternals.ctx.get("ClientStorageManager"),t=a.keysConfig.walkthru.persistenceData;a.saveData(t.key,i,t.expiry,o)},this.getPersistenceData=function(t){var t=i(t),n=a(t,-1),n={state:r.getInt(t[d.CURRENT_STATE_COOKIE_NAME],l.WALKTHRU_STATE.NOT_RUNNING),step:r.getInt(t[d.CURRENT_STEP_COOKIE_NAME],-1),playNum:t[d.CURRENT_STEP_PLAY_NUMBER_COOKIE_NAME]||c.stepAppearanceIndex,tutotrialGUID:t[d.CURRENT_PLAY_GUID_COOKIE_NAME],playInitiator:t[d.CURRENT_PLAY_INITIATOR_COOKIE_NAME],splitPointStack:r.defaultValue(t[d.SPLIT_POINT_COOKIE_NAME],[]),isTutorialFinished:r.defaultValue(t[d.TUTORIAL_FINISHED_COOKIE_NAME],0),stepPlayHistory:r.defaultValue(t[d.STEP_PLAY_HISTORY_COOKIE_NAME],[]),stepCompletedHistory:r.defaultValue(t[d.STEP_COMPLETED_HISTORY_COOKIE_NAME],[]),tutorial:e.getWalkthruIndexByWalkthruId(n),splitTutorialIds:r.defaultValue(t[d.SPLIT_TUTORIAL_IDS_COOKIE_NAME],[]),splitStartFromStepId:r.defaultValue(t[d.SPLIT_START_FROM_STEP_COOKIE_NAME],[]),interactionGuid:t[d.INTERACTION_GUID_COOKIE_NAME]};return p.raiseEvent("GettingPersistenceData",{persistenceData:t,current:n}),n},this.getRunningWalkthruId=function(t){return a(i(t))};var d=l.WALKTHRU_PERSISTANCE_DATA_FIELDS;function a(t,n){return r.getInt(t[d.CURRENT_TUTORIAL_COOKIE_NAME],n)}function i(t){return _walkmeInternals.ctx.get("ClientStorageManager").getData(l.STORAGE_KEYS.WALKTHRU_PERSISTENCE_DATA,{},t)}}},1538:function(t,n){t.exports=function(e,o,u,l,s,c,f,p,d,h,k,v,m,g,r){function t(t){f.customerLog("Restoring cross user state",5);var n=r.getAllUserGuids();if(!n.length)return t&&t(),!1;for(var e=0;e<n.length;e++)a(n[e],t);return!1}function a(a,i){var t=h.getRunningWalkthruId(a);function n(){t=h.getPersistenceData(a),!(n=o.getStepByIndex(t.tutorial,t.step))||t.isTutorialFinished||t.state!=v.WALKTHRU_STATE.WAITING_FOR_ELEMENT_EVENT&&t.state!=v.WALKTHRU_STATE.WAITING_FOR_NEXT_BUTTON_CLICK||p.getSettingsValue(n.Settings,"sticky",0)||n.IsSkippable||(f.customerLog("page change happened while waiting for element - pausing walkthru",2),t.state=v.WALKTHRU_STATE.PAUSED);var t,n=t,e=(u.stepAppearanceIndex=n.playNum,u.splitPointStack=n.splitPointStack,u.stepPlayHistory=n.stepPlayHistory,u.currentWalkthru=n.tutorial,u.currentStep=n.step,u.stepCompletedHistory=n.stepCompletedHistory,u.state=n.state,d.raiseEvent("RestoringStateFromCookie",n),l.setCurrentInteractionGuid(n.interactionGuid),n.tutotrialGUID&&(_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID=n.tutotrialGUID),_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayInitiator=n.playInitiator,o.getStepByIndex(u.currentWalkthru,u.currentStep));function r(){s.playSetTimeout(function(){c.executeCurrentStep()},1e3*e.Delay)}if((u.state==v.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE||u.state==v.WALKTHRU_STATE.PASSING_OWNERSHIP&&e)&&(u.currentStep--,(t=o.getStepByIndex(u.currentWalkthru,u.currentStep))&&(t.playNumber=u.stepAppearanceIndex),c.stepWasCompleted(!0),u.currentStep++),f.customerLog("isTutorialFinished: "+n.isTutorialFinished,5),1!=n.isTutorialFinished||u.state!=v.WALKTHRU_STATE.RUNNING&&u.state!=v.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE&&u.state!=v.WALKTHRU_STATE.PASSING_OWNERSHIP)if(f.customerLog("Continue from cookie: currentTutorial: "+u.currentWalkthru+" -- currentState: "+u.state+" -- currentStep: "+u.currentStep+" -- currentPlayGUID: "+_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID+" -- currentUserGUID: "+a,5),!e||u.state!=v.WALKTHRU_STATE.RUNNING&&u.state!=v.WALKTHRU_STATE.WAITING_FOR_ELEMENT&&u.state!=v.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT&&u.state!=v.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE&&u.state!=v.WALKTHRU_STATE.WAITING_FOR_CONDITION&&u.state!=v.WALKTHRU_STATE.PASSING_OWNERSHIP)if(e&&u.state==v.WALKTHRU_STATE.WAITING_FOR_REDIRECT)c.loadTutorial(u.currentWalkthru,0,!1,_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID,_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayInitiator);else if(e&&u.state==v.WALKTHRU_STATE.WAITING_FOR_OWNERSHIP)c.startNewTutorial(u.currentWalkthru,u.currentStep,!1,_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayInitiator);else if(!e||u.state!=v.WALKTHRU_STATE.WAITING_FOR_ELEMENT_EVENT&&u.state!=v.WALKTHRU_STATE.WAITING_FOR_NEXT_BUTTON_CLICK)if(u.state==v.WALKTHRU_STATE.WAITING_FOR_SPLIT)m.splitTutorialIds=n.splitTutorialIds,m.splitStartFromStepId=n.splitStartFromStepId,k.resumeSplit();else{if(u.state!=v.WALKTHRU_STATE.PAUSED)return c.resetState(),f.customerLog("Invalid cookie data. Not running tutorial. (userGuid : "+a+")",5),i&&i(!1),!1;f.customerLog("Tutorial was paused while restoring state from cookie. This can happen for several reasons when SPA is configured: A trigger for a balloon or wait for conditions has not been fullfilled. Alterntively an autostart is defined with sonar on an element that causes SPA page change. Please define the autostart without sonar.",1),g.releaseBalloons(),c.releaseBalloonsTimeouts(),c.resetState(),d.raiseEvent("WalkthruAborted")}else p.getSettingsValue(e.Settings,"sticky",0)?(f.customerLog("Sticky - keep looking for element",5),u.state=v.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT,r()):e.IsSkippable&&(u.getCurrentWalkthru().Steps.length==u.currentStep+1?c.tutorialFinished():(u.currentStep++,u.state=v.WALKTHRU_STATE.RUNNING,r()));else r();else c.tutorialFinished(!0);return i&&i(!0),!0}t?e.afterStepsLoaded(t,n):n()}this.restore=t,this.restoreCrossUsersState=t,this.restoreStateFromCookie=a}},1539:function(n,t,e){!function(t,i){n.exports=function(p,d,h,k,v){var e,r=this,a=(r.LoadStepsForWT=function(t){return r.afterStepsLoaded(t,function(){})},r.afterStepsLoaded=function(n,t){if(a[n])return a[n].then(t,t);var c=v.getWalkthrus(),f=function(t){for(var n=v.getWalkthrus(),e=0;e<n.length;e++)if(n[e].TutorialId==t)return e;return-1}(n);return c[f]&&0==c[f].Steps.length?(a[n]=new i(function(s,t){e.load(n).then(function(t){if(0==c[f].Steps.length){u=f,e=t,(l=v.getWalkthrus())[u].Steps=e,p.fixSteps(l[u],k.get());for(var n=t,e=s,r=[],a=0;a<n.length;a++){var i,o=n[a];h.isBranchStep(o)&&(i=o.Settings.action.arguments.wtId,r.push(m(i))),r=r.concat(function(t){var n=[];if(t.LinkedTutorialIds)for(var e=t.LinkedTutorialIds.split(";"),r=0;r<e.length;r++)e[r]&&n.push(m(e[r]));return n}(o))}d.executeParallel({functionsToExecute:r,successCallback:e})}else s();var u,e,l},t)}).then(t,t),!0):t()},{});function m(n){return function(t){a[n]?t():r.afterStepsLoaded(n,t)}}e=t.create("NoPublishStepsLoader",{jsonpCallbackPrefix:"steps",fileNamePrefix:"wt"})}}.call(this,e(2),e(12))},1540:function(t,n){t.exports=function(i,o,u,l,s,c,f,p,d,h,k,v,m){function g(a){_walkmeInternals.ctx.get("ElementFinder").wrapSession(function(){try{a=a||1e3;var n,t,e,r=0;1==v.splitTutorialIds.length?(e=v.splitTutorialIds[0],null!=v.splitStartFromStepId&&(-1!=(t=o.getStepIndex(v.splitStartFromStepId,e))&&(r=t),i.customerLog(m.formatString("Resuming split, walkthru id: {0}, step index: {1}",e,r)))):e=function(t){try{i.customerLog("Multiple branch: Going through all walk-thrus.");var n=function(t){t=k.map(t,function(t){var n=t.TutorialId,n=(n=l.getWalkthruById(n))?n.Name:"",n=(i.customerLog("Check walk-thru: "+t.TutorialId+" ("+n+")"),s.findElement(t));return n?i.customerLog("First step found."):i.customerLog("First step not found."),{step:t,element:n}}),t=k.filter(t,function(t){return t.element});return k.map(t,function(t){return t.step})}(k.map(t,function(t){return l.getWalkthruById(t).Steps[0]}));if(1==n.length)return n[0].TutorialId;if(!(1<n.length))return null;i.customerLog("can't decide which tutorial to play",5),i.customerLog(n.length+" walk-thrus match. Cannot choose which walk-thru to start.")}catch(t){i.error(t)}}(v.splitTutorialIds),e?(f.deprecatedRaiseEvent("switchToWalkthru",e),n=l.getWalkthruIndexByWalkthruId(e),c.playSetTimeout(function(){var t={type:p.STEP_PLAY_INITIATOR_ENUM.BRANCHING,objectId:d.getCurrentStep().Id,appType:p.EVENT_SENDER_EVENT_APPS.Step};u.loadTutorial(n,r,!1,void 0,t)},a),h.storeStateInCookie()):(i.customerLog("Try again in 1000ms."),c.playSetTimeout(function(){g()},1e3))}catch(t){i.error(t)}})}this.makeSplit=function(t,n,e,r,a){d.state=p.WALKTHRU_STATE.WAITING_FOR_SPLIT,1!=e&&(e=n,d.getCurrentWalkthru().Steps.length<=d.currentStep+1||d.splitPointStack.push({tutorialIndex:d.currentWalkthru,stepIndex:null!=e?e:d.currentStep+1,playGuid:_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID,playInitiator:_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayInitiator,stepPlayHistory:d.stepPlayHistory,stepCompletedHistory:d.stepCompletedHistory,stepPlayStack:d.stepPlayStack})),v.splitTutorialIds=t,v.splitStartFromStepId=r,h.storeStateInCookie(),u.stepWasCompleted(),g(a)},this.resumeSplit=g}},1541:function(t,n,e){!function(n){function v(t){return(v="function"==typeof n&&"symbol"==typeof n.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof n&&t.constructor===n&&t!==n.prototype?"symbol":typeof t})(t)}t.exports=function(o,s,u,i,l,c,f,t){var p=this,d=(p.getWalkthrus=function(t){try{for(var n=o.getWalkthrus(),e=new Array,r=0;r<n.length;r++){var a=n[r].CustomField1,i=(a=a&&(a=(a=(a=a.replace(/&quot;/gi,'"')).replace(/&apos;/gi,"'")).replace(/&#39;/gi,"'")).replace(/&amp;/gi,"&"),{Index:r,Name:n[r].Name,Id:n[r].TutorialId,Visible:n[r].IsVisible,CustomField1:a,Description:n[r].Description,Keywords:n[r].Keywords});t&&(i.ConditionsPassed=_walkMe.canShowTutorial(n[r]),i.isPackageHidden=_walkMe.isTutorialPackageHidden(n[r]),null==n[r].Keywords?i.Keywords=[]:i.Keywords=n[r].Keywords),e.push(i)}return e}catch(t){d("walkMeAPI - error running getWalkthrus.",3)}},p.getWalkthrusLabels=function(t){try{var n=(l=c.getSettingsValue(s.get().Settings,"labels",null))&&1==l.useLabels?f.get():null;if(null==n)return null;for(var e=this.getWalkthrus(t),r=function(t,n){for(var e=[],r=0;r<t.length;r++)for(var a=t[r].LinkedTutorials,i=0;i<a.length;i++)e.push(a[i]);for(var o=[],r=0;r<n.length;r++)k(n[r].Id,e)||o.push(n[r]);return o}(n,e),a=s.get(),i=[],o=0;o<n.length;o++){var u={Name:n[o].Name,Id:n[o].Id,Walkthrus:function(t,n,e){for(var r,a=[],i=0;i<t.length;i++)k(t[i].Id,n)&&((r=mtjQuery.extend(!0,{},t[i])).labelId=e,a.push(r));return a}(e,n[o].LinkedTutorials,n[o].Id)};i.push(u)}return{unlabeledWalkthrus:r,labels:i,unlabeledFirst:a.Settings.labels&&1==a.Settings.labels.unlabeldOnTop}}catch(t){d("walkMeAPI - error running getWalkthrusLabels.",3)}var l},p.startWalkthruById=function(t,n){try{var e=(t="object"!=v(t)?{id:t,fromStep:n}:t).id,r=t.fromStep,a=t.playInitiator;if(e<0||"number"!=typeof e)return!1;var i=h(e);return!(i<0)&&(a=a||{type:u.STEP_PLAY_INITIATOR_ENUM.API},p.startWalkthruByIndex({index:i,fromStep:r,playInitiator:a}))}catch(t){d("walkMeAPI - error running startWalkthruById.",3)}},p.startWalkthruByIndex=function(t,n){try{if(!i.isWalkMeVisible())return!1;var e=(t="object"!=v(t)?{index:t,fromStep:n}:t).index,r=t.fromStep,a=t.playInitiator;return!(e<0||"number"!=typeof e)&&(a=a||{type:u.STEP_PLAY_INITIATOR_ENUM.API},l.raiseEvent(u.EVENTS.ApiWasCalled,{initiator:a}),_walkMe.startNewTutorial(e,r,!1,a))}catch(t){d("walkMeAPI - error running startWalkthruByIndex.",3)}},p.canStartWalkthru=function(t,n){try{if(!i.isWalkMeVisible())return!1;if(t<0||"number"!=typeof t)return!1;var e=h(t);return!(e<0)&&_walkMe.startNewTutorial(e,n,!0,u.STEP_PLAY_INITIATOR_ENUM.API)}catch(t){d("walkMeAPI - error running canStartWalkthru.",3)}},p.setWalkthruVisibility=function(t,n){try{var e=o.getWalkthrus(),r=h(t);return!(r<0)&&(e[r].IsVisible=n,!0)}catch(t){d("walkMeAPI - error running setWalkthruVisibility.",3)}},p.stopWalkthru=function(){try{_walkMe.stopTutorial()}catch(t){d("walkMeAPI - error running stopWalkthru.",3)}},t.wrapCustomerLog("walkmeAPI"));function h(t){for(var n=o.getWalkthrus(),e=0;e<n.length;e++)if(n[e].TutorialId==t)return e;return-1}function k(t,n){for(var e=0;e<n.length;e++)if(n[e]==t)return 1}}}.call(this,e(32).wmSymbol)},1542:function(t,n){t.exports=function(a,t,n,e,i){var r=this;r.setTutorials=a.setTutorials,r.isTutorialPackageHidden=a.isTutorialPackageHidden,r.canShowTutorial=a.canShowTutorial,r.stopTutorial=a.stopTutorial,r.startNewTutorial=a.startNewTutorial,r.tutorialFinished=a.tutorialFinished,r.executeTutorialNextStep=a.executeTutorialNextStep,r.postWelcomeStep=a.postWelcomeStep,r.executeCurrentStep=a.executeCurrentStep,r.getCurrentTutorial=t.getCurrentWalkthru,r.getTutorials=n.getWalkthrus,r.setTutorialsForEditor=function(t,n){try{for(var e=_walkmeInternals.ctx.get("JsonUtils").secureEvalJSON(t),r=0;r<e.length;r++)e[r].userGuid=n;a.setTutorials(e)}catch(t){i.error(t)}},r.getState=function(){return t.state},r.forceSplit=function(){e.makeSplit.apply(null,arguments)},r.runTutorialsActionConditions={}}},1543:function(t,n){t.exports=function(){this.splitTutorialIds=[],this.splitStartFromStepId}},1544:function(t,n){t.exports=function(r,a,i,o,n,u,l,t,s){function c(t){mtjQuery(".walkme-action-close, .walkme-action-cancel",t).click(function(t){var t={ClickEvent:t},n=(o.raiseEvent("UserStoppedWalkthru",t),-1==r.currentStep);n||_walkmeInternals.ctx.get("AuditStepsManager").auditStep(r.getCurrentWalkthru(),r.getCurrentStep(),a.STEP_STATUS.Exited),i.stopTutorial(n),o.raiseEvent("UserStoppedWalkthruAfterStop",t)})}function f(t){t.durationHandler&&(t.durationHandler.clear(),t.durationHandler=null)}function p(t){for(var n,e=u.getAll(),r=0;r<e.length;r++)e[r].releaseEvents(t)&&(n=!0);return n}function d(t){return t.Type==a.STEP_TYPE.Popup&&t.LinkedTutorialIds&&i.isTutorialIdsExist(t.LinkedTutorialIds.split(";"))&&(n.makeSplit(t.LinkedTutorialIds.split(";")),1)}this.addButtonEventsToBalloon=function(t,n){var e;e=t,mtjQuery(".walkme-action-next, .walkme-action-start",e).click(function(){var t;o.raiseEvent("NextButtonClicked"),t=r.getCurrentStep(),o.deprecatedRaiseEvent(a.EVENTS.Walkthrus.StepTriggered,t),f(t),p()||(r.state=a.WALKTHRU_STATE.RUNNING,l.releaseBalloons(function(){d(t)||(i.stepWasCompleted(),i.executeTutorialNextStep())}))}),mtjQuery(".walkme-action-back",e).click(function(){o.raiseEvent("BackButtonClicked"),f(r.getCurrentStep()),r.stepPlayStack.pop(),p(r.lastBackButtonStepIndex-1)||i.executePreviousStep()}),mtjQuery(".walkme-action-done",e).click(function(){var t;o.raiseEvent("DoneButtonClicked"),t=r.getCurrentStep(),o.deprecatedRaiseEvent(a.EVENTS.Walkthrus.StepTriggered,t),f(t),d(t)||p()||(i.stepWasCompleted(),i.tutorialFinished())}),c(t),s.addButtonEventsToBalloon(t,n)},this.attachBalloonXButtonClickEvent=c}},1545:function(t,n){t.exports=function(f,p,d,h,k,v,m,g,n,S,w){this.showFailPopup=function(t,n,e,r){var a,i,o,u,l,s,c;r=(r+="<div style='float: right'>")+(t=t,i=n,(i=f.fixConfiguration(i)).ButtonBorderColor=i.ButtonBorderColor||"#6c84a6",t="rtl"==t.Direction?"right":"left",f.fixGradientColorsInConfiguration(i,"ButtonBgColor"),f.fixGradientColorsInConfiguration(i,"ButtonBgColor2"),o=i.ButtonBgColor,u=i.ButtonBgColor2,l=i.ButtonShadowWidth,s=i.BalloonButtonRadius,i="CSS-RESET "+((c=o!=u)?"background:-moz-linear-gradient(top, "+o+", "+u+");background:-webkit-gradient(linear, left top, left bottom, color-stop(0%,"+o+"), color-stop(100%,"+u+"));background:-webkit-linear-gradient(top, "+o+" 0%,"+u+" 100%);background:-o-linear-gradient(top, "+o+" 0%,"+u+" 100%);background:-ms-linear-gradient(top, "+o+" 0%,"+u+" 100%);background:linear-gradient(to bottom, "+o+" 0%,"+u+' 100%);filter: progid:DXImageTransform.Microsoft.gradient( startColorstr="'+o+'", endColorstr="'+u+'",GradientType=0 );':"background-color:"+o+";")+"border: 1px solid "+i.ButtonBorderColor+";color:"+i.ButtonTextColor+"; cursor: pointer; display: inline-block; float: none; font-size: 14px; font-weight: normal;font-family: Arial; margin-"+t+": 6px; padding: 2px 14px; text-align: center; text-decoration: none; position: static;overflow: visible;-moz-box-shadow: 0 0 "+l+"px rgba(0, 0, 0, 0.4);-webkit-box-shadow: 0 0 "+l+"px rgba(0, 0, 0, 0.4); box-shadow: 0 0 "+l+"px rgba(0, 0, 0, 0.4); -moz-border-radius:"+s+"px;-webkit-border-radius:"+s+"px;border-radius:"+s+"px;",o!=u&&S.isIE()&&(i+="border-radius: 0px;"),c&&CommonUtils.isGradientUsingFilter(i)&&(i+="background: url("+v.get()+"/player/resources/images/spacer.gif) repeat;"),"<button class='walkme-custom-first-step-not-available-ok-button mt-custom-first-step-not-available-ok-button CUSTOM-TUTORIAL-ID' type='button' style='"+(i=i.replace(/CSS-RESET/g,I))+"'>OK</button>"),t=n,l="first-step-not-available",s=r+="</div>",o=e.Id,u=W,l=(l=(l='<div class="mt-to-destroy walkme-custom-popup mt-custom-popup walkme-custom-popup-'+l+" mt-custom-popup-"+l+' CUSTOM-TUTORIAL-ID mt-to-destroy" id="walkme-popup-body" style="CSS-RESET width:420px">'+s+"</div>").replace(/CSS-RESET/g,I)).replace(/CUSTOM-TUTORIAL-ID/g,"walkme-custom-walkthru-"+o),(s=g.getTopContainer()).append(l),(y=mtjQuery("#walkme-popup-body",s)).css({position:"fixed","z-index":p.POPUP_BALLOON_Z_INDEX,padding:"8px 12px 12px 12px","font-family":"Arial"}),f.setStyleForBalloon(y,t,!1),a=0,mtjQuery.each(mtjQuery("[width], [style*=width]",y),function(t,n){mtjQuery(n).width()>a&&(a=mtjQuery(n).width())}),y.width()<a&&y.css("width",a+"px"),k.centerElementInPage(y,!1),C=h.playSetInterval(function(){k.centerElementInPage(y,!0)},1e3),w.shouldHandlePageAsFramesets()||d.displayOverlay(2147483630,!0),y.fadeIn("slow"),m.addButtonEventsToBalloon(y,{objectId:o,type:p.STEP_PLAY_INITIATOR_ENUM.WALKTHRU}),u&&u(y)},this.closePopup=e;var y,C,I="display: block; padding: 0; margin: 0;\tvertical-align: baseline; border-collapse: inherit; background: none; border-spacing: 1px 1px; line-height: normal; border: none none; height: auto; text-indent: inherit;  font-family: Arial; letter-spacing: normal; text-align: left; text-transform: none; font-weight: normal; outline: invert none medium; width: auto;  border-top: none; border-right: none; border-bottom: none; border-left: none; direction: ltr; position: static; top: auto; left: auto;";function e(t){C&&C.clear(),n.shouldKeepOverlay()||d.removeOverlay(),d.destroyDivWithIframes(y,t),y=null}function W(t){mtjQuery(".walkme-custom-first-step-not-available-ok-button",t).click(function(){e()})}}},1546:function(t,n){t.exports=function(a,i){this.showFailedToStartPopup=function(t,n,e){if("v3"==t.BalloonSettings.BalloonVersion||"vm1"==t.BalloonSettings.BalloonVersion)return a.showFailedToStartPopup(t,n,e.Settings.bbcode_v,e.Id);var r=t.BalloonSettings,n={balloonSettings:r,alertText:n,isOldBalloon:!0,bbCodeVersion:e.Settings.bbcode_v,balloonEntityId:e.Id},n=a.createHtmlForNotAvailablePopup(n);i.showFailPopup(t,r,e,n)}}},1547:function(t,n){t.exports=function(n){this.isActionStep=function(t){return t.Type&&t.Type==n.STEP_TYPE.Action},this.isBranchStep=function(t){return t.Type&&t.Type==n.STEP_TYPE.Action&&t.Settings&&t.Settings.action&&t.Settings.action.actionType==n.STEP_ACTION.Branch},this.isPopupStep=function(t){return t&&t.Type&&t.Type==n.STEP_TYPE.Popup},this.isSpotlightStep=function(t){return t&&t.Settings&&(1==t.Settings.fadeBackground||"True"==t.Settings.fadeBackground||1==t.Settings.fadeBackground)}}},1548:function(t,n){t.exports=function(l,s,c){this.activateSurvey=function(t,n,e,r,a,i,o){var u=c.walkthruSurveyActivator.surveyRepeat.key+t.TutorialId,n={tutorialId:t.Id,eventSource:n,callback:i,stepIndex:o,lastStepIndex:t.Steps.length-1,surveyPlayGUID:s._currentPlayGUID};l.activateSurvey(r,u,a,e,n)}}},1549:function(t,n){t.exports=function(e,a,r,i,o,n){var t=this;function u(t,n){n=n.wt;null!=n.Id&&a.safeStartAudit(t,n)}t.auditSafeStartStatus=u,t.redirect=function(t,n){i.currentStep=0,i.state=e.WALKTHRU_STATE.WAITING_FOR_REDIRECT,i.currentWalkthru=n.tutorialIndex,o.storeStateInCookie(),r.redirect(t)},t.auditStayButtonClicked=function(t){u(e.SAFESTART_ACTION.StayClicked,t)},t.auditSafeStartDisabled=function(t){t={tutorialId:t.wt.TutorialId,tutorialName:t.wt.Name,playGuid:a._currentPlayGUID,playInitiator:a._currentPlayInitiator,status:e.SAFESTART_ACTION.ErrorShown};n.send(t)},t.auditSafeStartFirstStatus=function(t,n){u(t,n);for(var e=n,r=0;r<e.checkStepExistsTrace.length;r++)a.auditStep(e.wt,e.wt.Steps[e.checkStepExistsTrace[r].stepIndex],e.checkStepExistsTrace[r].stepStatus)}}},1550:function(t,n){t.exports=function(a,i,o){this.migrateSiteConfigData=function(t){for(var n=a.getWalkthrus(),e={},r=0;r<n.length;r++)o.fixSteps(n[r],t),e[n[r].TutorialId]={siteConfig:t,isPackageHidden:_walkmeInternals.ctx.get("LibInitializer").isNextDataPackageIsHidden()};i.setMember("tutorialRunSettingsMap",e)}}},1551:function(t,n){t.exports=function(r,a,i,t,o,u){var n=this;n.register=function(){t.registerDataAppender(n)},n.append=function(t,n){var e;o.isNewLanguage()&&r.setWalkthrus([]),n=n[i.Tutorial],e=(e=r.getWalkthrus()).concat(n),r.setWalkthrus(e),o.isNewLanguage()&&u.setDeployables(r.getWalkthrus()),a.migrateSiteConfigData(t.SiteConfig)}}},1552:function(t,n){t.exports=function(c,f,p,d,h,t){var n=this;n.register=function(){t.registerConverter(n)},n.convert=function(t,n){for(var e=p.get(0).getAll(),r={},a=0;a<e.length;a++)for(var i=e[a].Steps,o=0;o<i.length;o++){var u,l,s=i[o];f.isActionStep(s)&&(s=d.getSettingsValue(s.Settings,"action",null))&&"setWalkMeData"==s.actionType&&(t[u=(s=s.arguments).dataKey]&&(s=s.dataDuration)>=c.ONE_DAY_SECONDS&&(r[u]?s>r[u].Expiry&&(r[u].Expiry=s):void 0!==(l=t[u])&&(r[u]={Value:l,Expiry:s})))}for(u in r)r.hasOwnProperty(u)&&h.saveData(u,r[u].Value,parseInt(r[u].Expiry),n)}}},1553:function(t,n){t.exports=function(e,r,a,t,n){function i(t,n){n.isDuringLanguageChange?e.stopTutorial(void 0,!0,!0):(n.isDestroyingAll&&(e.setMember("tutorialRunSettingsMap",{}),e.setMember("executeTutorialNextStepNotFinished",!1)),a.closePopup(),r.releaseAllEventBindings(),e.cleanCurrentStepResources())}this.init=function(){t.on(n.EVENTS.CallReleaseElementsFromBalloons,i)}}},1554:function(t,n){t.exports=function(r,t){var a,n=this;function e(t,n,e){r.isPopupStep(n)&&(a=document.activeElement,e.Balloon.find(".walkme-custom-balloon-title").focus())}function i(t,n){r.isPopupStep(n)&&a&&(a.focus(),a=null)}n.register=function(){t.register(n)},n.bindEvents=function(){_walkmeInternals.bind("NewStepShown",e),_walkmeInternals.bind("StepCompleted",i),_walkmeInternals.bind("TutorialStopped",i)}}},1555:function(t,n){t.exports=function(e){this.append=function(t){var n=e.getCurrentWalkthru();n&&(t.WalkthruId=n.TutorialId,(n=e.getCurrentStep())&&(t.StepIndex=n.StepIndex))}}},1556:function(t,n){t.exports=function(t,e){this.init=function(){wmjQuery.each(t.get(),function(t,n){n.addAppender(e)})}}},1557:function(t,n){t.exports=function(r,a,i,o){this.handle=function(t,n){var e;a.isInPlayMode()?(n={step:t.Steps[n],tutorial:t},r.raiseEvent("WalkthruFailedToStart",n)):(n=o.getSiteConfigByTutorialId(t.Id),e=i.getSettingsValue(t.Settings,"cantPlayAlert",n.TutorialCantPlayText),_walkmeInternals.ctx.get("WalkthruPopupNotificationsService").showFailedToStartPopup(n,e,t))}}},1558:function(t,n){t.exports=function(r,t,e,i,a,o,u,l,n,s,c,f,p,d,h,k,v,m,g,S,w){this.register=function(){r.addActions(y)};var y={playWt:function(e,r,a){function t(){try{var t=e.playWtFromBeginning?0:l.getStepIndex(e.StepId,e.wtId);-1==t?(n=S.formatString("Step with id: {0} was not found in walkthru with id {1}",e.StepId,e.wtId),k.customerLog(n)):WalkMeAPI.startWalkthruById({id:parseInt(e.wtId),fromStep:t,playInitiator:{type:r,objectId:a.Id}})}catch(t){var n=S.formatString("Failed starting walkthru with id {0}, starting from step {1}. Exception is: {2}",e.wtId,e.StepId,w.toJSON(t));k.customerLog(n)}}this.isValid=function(){return!0},this.Type=i.DEPLOYABLE_ACTION_TYPES.Action,this.doAction=function(){g.afterStepsLoaded(e.wtId,t)}},redirect:function(n){this.isValid=function(){return!0},this.Type=i.DEPLOYABLE_ACTION_TYPES.Action,this.doAction=function(){f.stepWasCompleted();var t=n.redirectUrl;u.redirect(t)||(f.stepWasCompleted(),f.executeTutorialNextStep())}},refresh:function(){this.isValid=function(){return!0},this.doAction=function(){f.stepWasCompleted(),c.storeStateInCookie(),h.libSetTimeout(function(){location.reload(!0)},200)},this.Type=i.DEPLOYABLE_ACTION_TYPES.Action},branchWt:function(e,t,r){this.Type=i.DEPLOYABLE_ACTION_TYPES.Action,this.isValid=function(){return t=e.wtId,!!n.getWalkthruById(t);var t},this.doAction=function(){var t,n=e.wtId;1==e.returnToWt?(t=l.getStepIndex(e.StepId,r.TutorialId),p.makeSplit([n],t,!1,e.startingStepId)):p.makeSplit([n],t,!0,e.startingStepId)},this.getGoToData=function(){return{tutorialIndex:n.getWalkthruIndexByWalkthruId(e.wtId),stepIndex:0}}},stopWt:function(){this.type="stopWt",this.Type=i.DEPLOYABLE_ACTION_TYPES.Action,this.isValid=function(){return!0},this.doAction=function(){f.stepWasCompleted(),t.stopTutorial()}},playStep:function(e,t,r){this.Type=i.DEPLOYABLE_ACTION_TYPES.Action,this.isValid=function(){return t=e.StepId,n=r.TutorialId,-1!=l.getStepIndex(t,n);var t,n},this.doAction=function(){var t=e.StepId,t=l.getStepIndex(t,r.TutorialId);f.stepWasCompleted(),s.currentStep<t&&f.fillMissingStepAudits(s.currentWalkthru,s.currentStep+1,t,i.STEP_STATUS.SkippedByActionStep),s.currentStep=t,f.executeCurrentStep()},this.getGoToData=function(){var t=e.StepId,t=l.getStepIndex(t,r.TutorialId);return{tutorialIndex:n.getWalkthruIndexByWalkthruId(r.TutorialId),stepIndex:t}}},openPlayerMenu:function(t,n,e){this.isValid=function(){return null!=window.WalkMePlayerAPI},this.Type=i.DEPLOYABLE_ACTION_TYPES.Action,this.doAction=function(){try{f.stepWasCompleted(),r.get("openMenu",t,n,e).doAction()}catch(t){k.error(t,"Failed opening player menu")}f.executeTutorialNextStep()}},waitForCond:function(r){this.Type=i.DEPLOYABLE_ACTION_TYPES.Action,this.isValid=function(){return!0},this.doAction=function(){s.state=i.WALKTHRU_STATE.WAITING_FOR_CONDITION,c.storeStateInCookie();var n=s.getCurrentStep(),t={evaluationPollingIntervalMs:500,featureName:C,elementName:"Wait for condition step: "+n.StepTitle},t=v.createOld(t),e=r.condition;t.onValueChanged(function(t){d.isDebuggerOnWindow()&&o.deprecatedRaiseEvent(i.EVENTS.ActionConditionEvaluated,n),t&&(f.stepWasCompleted(),f.executeTutorialNextStep())}),t.evaluateAsync(e),f.addCurrentStepResource(t)}},delay:function(t){this.isValid=function(){return!0},this.doAction=function(){return c.storeStateInCookie(),h.playSetTimeout(function(){f.stepWasCompleted(),f.executeTutorialNextStep()},1e3*t.duration),!0},this.Type=i.DEPLOYABLE_ACTION_TYPES.Action},passOwnership:function(t,n,e){this.isValid=function(){return!0},this.Type=i.DEPLOYABLE_ACTION_TYPES.Action;var r={stepId:e.Id,tutorialId:e.TutorialId};this.doAction=function(){var t=a.keysConfig.passOwnership.newWindowTime;if(a.saveData(t.key,(new Date).getTime(),t.expiry),!m.get().enabled())return k.customerLog("Reached pass ownership step but the feature is not supported, the next step will not be executed."),void f.tutorialFinished();m.get().determineOwnership(r)}},setWalkMeData:function(n){this.isValid=function(){return!0},this.doAction=function(){var t=Math.min(n.dataDuration,i.COOKIE_LIFE_2_YEARS);e.saveData(n.dataKey,n.dataValue,t),f.stepWasCompleted(),f.executeTutorialNextStep()},this.Type=i.DEPLOYABLE_ACTION_TYPES.Action}},C="superstep"}},1559:function(t,n){t.exports=function(e,r,a){var i;this.redirect=function(t,n){return!!e.canRedirect(t,n)&&(a.storeStateInCookie(),i=r.libSetTimeout(function(){e.redirect(t)},200),!e.isUrlDifferentFromCurrentOnlyInHash(t))},this.canRedirect=function(t,n){return e.canRedirect(t,n)&&!e.isUrlDifferentFromCurrentOnlyInHash(t)},this.clearRedirectTimer=function(){i&&i.clear()}}},1560:function(t,n){t.exports=function(h,i,t,k,v,n,m,g,S,w,y,C,o,I,u,r,l,W,b,s,M){var A=this,e=(A.getDelay=function(){return n.get().Settings.keyPressedNextStepDelay||e},2e3),a=[];function T(t,e,n,r,a){var i=void 0;r.push(x(t,0,["change"],n,1e3,{change:i=a?function(t){var n=e.Settings.complexHtml,t="option"==t.target.tagName.toLowerCase()?t.target:t.target.options[t.target.selectedIndex];return t.value==n.val||t.text==n.txt}:i}))}function x(t,n,r,a,i,e){C.state=S.WALKTHRU_STATE.WAITING_FOR_ELEMENT_EVENT;for(var o=E(function(t,n){k.customerLog("Step event triggered.");var e=-1!==wmjQuery.inArray("click",r);return P(a,i,e,t,n),!0}),u=0;u<r.length;u++){var l=function(n){return function(t){n&&!n(t)||o(t)}}(e&&e[r[u]]);D(t,r[u]+".mt",l)}return function(t){return o(null,t)}}function E(r){var a=!1;return function(t,n){var e;return a||(e=r(t,n),a=!0),e}}function D(t,n,e){r.bind(t,n,e),a.push({element:t,eventName:n})}function P(t,n,e,r,a){u.releaseBalloons(),e&&(i.shouldHandlePageAsFramesets()&&i.checkIfAnyFrameIsUnloaded(n),null!=r&&s.setIgnoreNextBeforeUnload(function(t){if(l.isIE()){var n=!1;if("a"==t[0].nodeName.toLowerCase()?n=t:0<(t=t.parents("a")).length&&(n=mtjQuery(t[0])),n&&n.attr("href")&&0==n.attr("href").indexOf("javascript:"))return!0}return!1}(mtjQuery(r.target)))),C.state=S.WALKTHRU_STATE.RUNNING,o.storeStateInCookie(),y.stepWasCompleted(null==a),null!=a&&(C.currentStep=a),t&&null==a?y.tutorialFinished():h.playSetTimeout(function(){y.executeTutorialNextStep()},n)}A.handle=function(t,n,e,r,a,i){var o,u=C.getStep(e),e=!1,l=!!u.LinkedTutorialIds,s=[],c=(l&&(c=u.LinkedTutorialIds.split(";"),y.isTutorialIdsExist(c)?(k.customerLog("This is a branched step. Branched walk-thru's: "+u.LinkedTutorialIds),s.push(function(t,n,e){C.state=S.WALKTHRU_STATE.WAITING_FOR_ELEMENT_EVENT,y.releaseEvents(t,n);for(var r=E(function(){k.customerLog("Clicked the branched walk-thru."),y.releaseEvents(t,n),I.makeSplit(e)}),a=E(function(){y.releaseEvents(t,n)}),i=0;i<n.length;i++)D(t,n[i]+".mt",r);return function(){return a()}}(t,["click","mousedown"],c))):(k.customerLog("Branch walk-thru id, not found: "+u.LinkedTutorialIds),l=!1)),!1),f=!1,p=y.getNextStepIncludingSplit(),d=null==p;return y.isStepTrigger(u.End,S.WALKTHRU_STEP_TRIGGER.NEXT_BUTTON)&&(C.state=S.WALKTHRU_STATE.WAITING_FOR_NEXT_BUTTON_CLICK,d||(p.IsSkippable||b.getSettingsValue(p.Settings,"skipNotExists",!1)||y.getPlayConditionMode(p)!=S.playConditionModes.STICKY_CONDITION&&!y.checkPlayStepCondition(p)||b.getSettingsValue(p.Settings,"fake",!1))&&-2==y.checkIfStepExistsWithSkippables(p.TutorialIndex,p.StepIndex,void 0,void 0,void 0,S.CHECK_STEP_MODE.Normal)?f=!0:c=!0),y.isStepTrigger(u.End,S.WALKTHRU_STEP_TRIGGER.NOTHING)?d||(e=!0):y.isStepTrigger(u.End,S.WALKTHRU_STEP_TRIGGER.HOVER)?s.push(x(t,0,o=["mouseenter"],d,500)):y.isStepTrigger(u.End,S.WALKTHRU_STEP_TRIGGER.CLICK)&&!l?(o=w.get(),s.push(x(t,0,o,d,1e3))):y.isStepTrigger(u.End,S.WALKTHRU_STEP_TRIGGER.KEY_PRESSED)?(p=A.getDelay(n),o=["keydown","paste","change"],l={},v.isFeatureEnabled("wmAccessibility")&&(l.keydown=function(t){return 9!=t.which&&16!=t.which}),s.push(x(t,0,o,d,p,l))):y.isStepTrigger(u.End,S.WALKTHRU_STEP_TRIGGER.PAGE_CHANGED)?(C.state=S.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE,y.setMember("dontContinueTutorial",!0)):y.isStepTrigger(u.End,S.WALKTHRU_STEP_TRIGGER.DURATION)?u.durationHandler=h.playSetTimeout(function(){y.stepWasCompleted(),y.executeTutorialNextStep()},1e3*u.Duration):y.isStepTrigger(u.End,S.WALKTHRU_STEP_TRIGGER.SELECT_ANY)?T(t,n,d,s,!1):y.isStepTrigger(u.End,S.WALKTHRU_STEP_TRIGGER.SELECT_VALUE)?T(t,n,d,s,!0):y.isStepTrigger(u.End,S.WALKTHRU_STEP_TRIGGER.SWIPE)&&s.push(x(t,0,o=["swipe"],d,500)),u.Settings.additionalTriggers&&(g.deprecatedRaiseEvent(S.EVENTS.Walkthrus.StepAdditionalTriggerSet,u),p={elementName:n.StepTitle||n.StepText,evaluationPollingIntervalMs:500,onlyPollConditionFunctions:!0,ownerChain:i},(l=W.createOld(p)).onValueChanged(function(t){g.deprecatedRaiseEvent(S.EVENTS.Walkthrus.StepAdditionalTriggersInitialized,u),t&&(y.setMember("dontContinueTutorial",!1),u.durationHandler&&(u.durationHandler.clear(),u.durationHandler=null),t=m.containsFuncName(u.Settings.additionalTriggers,["ElementClicked"]),P(d,1e3,t))}),l.evaluateAsync(u.Settings.additionalTriggers),y.addCurrentStepResource(l)),{executeNextStep:e,clearElementEventsFuncs:s,buttons:{nextButton:c,doneButton:f,backButtonStepIndex:M.handleStepIndex(u,a,r)}}},A.releaseAllEventBindings=function(){for(var t=0;t<a.length;t++)try{var n=a[t].element,e=a[t].eventName;r.unbind(n,e)}catch(t){}a.length=0},function(){}.apply(null,arguments)}},1561:function(t,n){t.exports=function(a,i,o,u){this.handleStepIndex=function(t,n,e){var r;return 0<t.StepIndex&&a.isStepTrigger(t.End,i.WALKTHRU_STEP_TRIGGER.NEXT_BUTTON)&&!function(t){if(null!=t)return t=o.getStep(t),u.isActionStep(t)}(n)&&(0<=(r=a.checkIfStepExistsWithSkippables(e,t.StepIndex-1,0,-1,void 0,i.CHECK_STEP_MODE.Normal))&&(n=o.getStep(r),a.isStepTrigger(n.End,i.WALKTHRU_STEP_TRIGGER.NEXT_BUTTON)||(r=-1)),o.lastBackButtonStepIndex=r),r}}},1562:function(t,n){t.exports=function(t,r,a){this.findFirstStep=function(t,n,e){return a.checkIfStepExistsWithSkippables(t,n=n||0,void 0,void 0,e,r.CHECK_STEP_MODE.Normal)},function(){}.apply(null,arguments)}},1563:function(t,n){t.exports=function(r,a,i,t,n){function e(t,n){var e=r.mapBbcodeInitiator(n);a.deprecatedRaiseEvent("switchToWalkthru",t),i.afterStepsLoaded(t,function(){WalkMeAPI.startWalkthruById({id:t,fromStep:0,playInitiator:e})})}this.register=function(){t.add({linkSelector:".walkme-action-start-wt",idDataKey:"data-walkthru-id",clickEvent:n.EVENTS.BBCodeStartActionClicked.Walkthru,activator:e})}}},1564:function(t,n){t.exports=function(a,t,i,o,u){function n(t,n){var e,r;-1==t&&a.getCurrentWalkthru()&&(i.stop(),t=u.SURVEY_START_EVENTS.BbCodeClicked,r=(e=a.getCurrentWalkthru()).Settings.survey&&e.Settings.survey.surveyId,_walkmeInternals.ctx.get("WalkthruSurveyActivator").activateSurvey(e,t,o.mapBbcodeInitiator(n),r,"always"))}this.register=function(){t.add({linkSelector:".walkme-action-start-survey",idDataKey:"data-survey-id",clickEvent:u.EVENTS.BBCodeStartActionClicked.Survey,activator:n})}}},1565:function(t,n){t.exports=function(n,t){this.isEnabled=function(t){return n.isPopupStep(t)},this.findElement=function(){return t.get()}}},1566:function(t,n){t.exports=function(n){this.isEnabled=function(t){return n.isActionStep(t)},this.findElement=function(t){return _walkmeInternals.ctx.get("WalkthrusModule").getAction(t).isValid()}}},1567:function(t,n,e){!function(P){t.exports=function(t,n,e,r,a,i,o,u,l,s,c,f,p,d,h,k,v,m,g,S,w,y,C,I,W,b){var M,A,T,x;function E(){D(A)}function D(t){wmjQuery.each(t,function(t,n){n.register()})}this.init=function(){D(M),W.one(C.EVENTS.DATA_FILES_LOADED,E)},this.postDataFileLoaded=E,T=P.get("AutoStartHelper"),x=P.get("AutoStartTypes"),M=[e],(A=[r,n,i,l,p,d,S,w,P.get("WalkthruActionClickedEventBinder")]).push({register:function(){_walkmeInternals.ctx.get("DeployablesManagerFactory").add(C.DEPLOYABLE_TYPE.Tutorial,_walkmeInternals.ctx.get("TutorialsManager"))}}),A.push({register:function(){a.fixAnchorTagsOnBeforeUnload()}}),A.push({register:function(){u.addStopper({stop:function(){o.stopTutorial(!1,!0)}})}}),A.push({register:function(){s.init()}}),A.push({register:function(){_walkmeInternals.ctx.get("TutorialsManager").setDeployables(_walkmeInternals.ctx.get("WalkthrusContainer").getWalkthrus())}}),A.push({register:function(){x.addDeployable(c.Tutorial,f,c.BusinessSolution)}}),A.push({register:function(){g.register(v),g.register(m)}}),A.push({register:function(){k.addRestorer("wt",h,!0)}}),A.push({register:function(){_walkmeInternals.ctx.get("WalkthruEventsInitializer").init()}}),A.push({register:function(){wmjQuery.extend(t,_walkmeInternals.ctx.get("WalkthruLegacyExternalApi")),window.WalkMeAPI&&wmjQuery.extend(window.WalkMeAPI,_walkmeInternals.ctx.get("WalkthruApi"))}}),A.push({register:function(){y.addOwnershipManager(C.PASS_OWNERSHIP.PassOwnershipEntity.Walkthru,I,!0)}}),A.push({register:function(){T.addAutoStartHelper(b,c.Tutorial)}})}}.call(this,e(2))},1568:function(t,n){t.exports=function(i,o,u,r,e,l,s,a,c,f,t,n,p,d,h,k){var v,m=this;function g(t){var n=h.getCurrent()==o.PASS_OWNERSHIP.PassOwnershipEntity.Walkthru,e=n?h.getCurrentStepData():function(){var t=k.getOwnershipCondition();if(t)return{walkthruId:t.tutorialId,step:a.getStepByWalkthruAndStepIds(t.tutorialId,t.stepId)}}(),e=r.evaluateOwnership(e.step,e.walkthruId,n);if(!n&&!t)switch(e){case o.PASS_OWNERSHIP.EvaluateOwnership.Owner:u.stepWasCompleted(),u.executeTutorialNextStep();break;case o.PASS_OWNERSHIP.EvaluateOwnership.NotOwner:l.state!=o.WALKTHRU_STATE.PASSING_OWNERSHIP&&l.currentStep++,l.state=o.WALKTHRU_STATE.PASSING_OWNERSHIP,s.storeStateInCookie()}return e}m.walkthruStarted=function(r,a){return h.wrap(o.PASS_OWNERSHIP.PassOwnershipEntity.Walkthru,(t=a,{walkthruId:(n=e.getWalkthruByIndex(r)).Id,step:n.Steps[t]}),function(){var t=r,n=a,e=i.get().optimizedDetermineOwnership();return e||(l.state=o.WALKTHRU_STATE.WAITING_FOR_OWNERSHIP,l.currentWalkthru=t,l.currentStep=n,s.storeStateInCookie(),u.terminateTutorial(),l.state=o.WALKTHRU_STATE.NOT_RUNNING,i.get().reset()),e});var t,n},m.evaluateOwnership=function(t,n){return n?h.wrap(o.PASS_OWNERSHIP.PassOwnershipEntity.Walkthru,n,function(){return g(t)}):g(t)},m.evaluateOwnershipByPeeking=function(){return(p.isFeatureEnabled("po_peek")||p.isFeatureEnabled("passOwnership"))&&r.isPassOwnershipStep(n.peekNextCookieStep())},m.gainedOwnership=function(t,n,e){v("walkthru is gaining ownership with state "+l.state,3),e&&(e=n,t?(_walkmeInternals.ctx.get("WalkthrusModule").setMember("dontContinueTutorial",!1),d.resumeTimeoutsArray("playTimeouts")):(v("ownership granted to: "+e,3),f.restoreStateFromCookie(c.getUserGuid())))},m.lostOwnership=function(){_walkmeInternals.ctx.get("WalkthrusModule").terminateTutorial()},v=t.wrapCustomerLog(o.PASS_OWNERSHIP.LOG_FEATURE)}},1569:function(t,n){t.exports=function(i,o,u,l){this.peekNextCookieStep=function(t){try{t=t||0;var n=i.getData(o.STORAGE_KEYS.WALKTHRU_PERSISTENCE_DATA,{},l.getAllUserGuids()[0]),e=n[o.WALKTHRU_PERSISTANCE_DATA_FIELDS.CURRENT_TUTORIAL_COOKIE_NAME],r=u.getWalkthruById(e),a=n[o.WALKTHRU_PERSISTANCE_DATA_FIELDS.CURRENT_STEP_COOKIE_NAME];return r.Steps[a+t]}catch(t){return null}}}},1570:function(t,n){t.exports=function(r){function a(t){return t&&t.Settings&&t.Settings.action&&t.Settings.action.actionType==r.STEP_ACTION.PassOwnership}this.isPassOwnershipStep=a,this.evaluateOwnership=function(t,n,e){return e&&!a(t)?r.PASS_OWNERSHIP.EvaluateOwnership.CantBeDetermined:function(t,n){if(null!==t)try{return _makeTutorial.evaluateConditionTree(t.Settings.action.arguments.condition)}catch(t){return 1}else _walkmeInternals.ctx.get("WalkthruStepsLoader").LoadStepsForWT(n)}(t,n)?r.PASS_OWNERSHIP.EvaluateOwnership.Owner:r.PASS_OWNERSHIP.EvaluateOwnership.NotOwner}}},1571:function(t,n){t.exports=function(o,u,l,s,c){var f,p;this.clearCache=function(){p=f=void 0},this.checkShouldAutoStart=function(t,n,e){var r,a,i;return t!=o.Tutorial||(t=e,n=u.getWalkthruIndexByWalkthruId((e=n).Id),r=l.checkTutorialSkipFirstStepCondition(n),a=l.checkTutorialRedirectCondition(n,!1),e=e.IsWelcomeStep,!((i=f=f||s.get()).state==c.WALKTHRU_STATE.RUNNING&&i.step==r)&&(null==p?p=i.state==c.WALKTHRU_STATE.PAUSED||i.state==c.WALKTHRU_STATE.NOT_RUNNING||!t&&l.checkIfStepExistsWithSkippables(i.tutorial,i.step,void 0,void 0,void 0,c.CHECK_STEP_MODE.Sandbox,"- Engagement")<0:p)&&(a&&e||l.checkIfStepExistsWithSkippables(n,r,void 0,void 0,void 0,c.CHECK_STEP_MODE.Sandbox,"- Check if Exists with Skippables")>=r&&!a))}}},1572:function(t,n){t.exports=function(n,e,r){this.get=function(){var t=n.getPersistenceData();return r.state==e.WALKTHRU_STATE.PAUSED&&(t.state=r.state),t}}},1573:function(t,n){t.exports=function(n,e,r){this.isRunning=function(){var t=n.get();return t.state==r.WALKTHRU_STATE.PAUSED||t.state==r.WALKTHRU_STATE.NOT_RUNNING||e.checkIfStepExistsWithSkippables(t.tutorial,t.step,void 0,void 0,void 0,r.CHECK_STEP_MODE.Sandbox,"- Engagement")<0?wmjQuery.Deferred().reject():wmjQuery.when()}}},1574:function(t,n){t.exports=function(e,r){this.fixAnchorTagsOnBeforeUnload=function(){var t,n;e.isIE()&&((t=mtjQuery("a[href^='javascript:']")).off(n="click.walkme.ignoreUnload"),t.on(n,function(){r.setIgnoreNextBeforeUnload(!0)}))}}},1575:function(t,n){t.exports=function(a,i,t){function n(t){t=parseInt(t);for(var n=a.stepPlayHistory,e=0;e<n.length;e++){var r=i.getStepById(n[e]);if(r&&r.StepIndex==t)return!0}return!1}this.register=function(){t.addSupportedFunction("isStepPlayed",n)}}},1576:function(t,n){t.exports=function(a,e,i,o,u,l,s){this.register=function(){wmjQuery.each(t,function(t,n){e.register(t,n.handler,n.params)})};var t={};function r(t,n){for(var e=parseInt(n.funcArgs.StepId),r=l.stepPlayHistory,a=0;a<r.length;a++)if(r[a]==e)return void t.setValue(!0);t.setValue(!1)}function c(t,n){for(var e=parseInt(n.funcArgs.StepId,10),r=0;r<l.stepCompletedHistory.length;r++)if(l.stepCompletedHistory[r]==e)return void t.setValue(!0);t.setValue(!1)}function f(t,n){var e=parseInt(n.funcArgs.StepId),n=parseInt(n.funcArgs.TutorialId),r=i.getWalkthruById(n),e=o.getStepIndex(e,n);if(r&&-1<e)return n=r.Steps[e],void t.setValue(!1!==a.findElement(n,!1));t.setValue(!1)}function p(t,n){var e=parseInt(n.funcArgs.StepId),n=parseInt(n.funcArgs.TutorialId),r=i.getWalkthruIndexByWalkthruId(n),e=o.getStepIndex(e,n);-1<e&&-1<r&&0<=u.checkIfStepExistsWithSkippables(r,e,void 0,void 0,void 0,s.CHECK_STEP_MODE.Sandbox)?t.setValue(!0):t.setValue(!1)}function d(t,n){var e=parseInt(n.funcArgs.StepId),n=parseInt(n.funcArgs.TutorialId),r=i.getWalkthruById(n),e=o.getStepIndex(e,n);if(r&&-1<e)return n=r.Steps[e],void t.setValue(!1!==a.findElement(n,!0));t.setValue(!1)}function h(t,n,e){t(n,e),n.setValue(!n.getValue())}t.StepPlayed={handler:r},t.StepNotPlayed={handler:function(t,n){h(r,t,n)}},t.StepCompleted={handler:c},t.StepNotCompleted={handler:function(t,n){h(c,t,n)}},t.StepExists={handler:f,params:{editorPreview:!0}},t.StepNotExists={handler:function(t,n){h(f,t,n)},params:{editorPreview:!0}},t.StepCanPlay={handler:p},t.StepCannotPlay={handler:function(t,n){h(p,t,n)}},t.StepIsVisible={handler:d,params:{editorPreview:!0}},t.StepIsNotVisible={handler:function(t,n){h(d,t,n)},params:{editorPreview:!0}}}},1577:function(t,n){t.exports=function(o,u,l){this.auditWalkthruStart=function(t,n,e,r,a){var i=t.Steps;u.postEvent(u.EVENT_TYPES.Play,{type:u.getEventAppByDeployable(o.Tutorial),oId:t.TutorialId,oName:t.Name,pId:a||-1,pInit:l.map(n),oRequestedSubObject:i[e].Id,oActualSubObject:i[r].Id})},function(){}.apply(null,arguments)}},1578:function(t,n){t.exports=function(s,c,f,p,r,d,h,k,v,n){var m,g=this;function S(t){null!=g._currentPlayGUID&&0!=g._currentPlayGUID.length||(g._currentPlayGUID=n.generateNewPlayGuid(t))}g.safeStartAudit=function(t,n){try{var e={tutorialId:n.TutorialId,tutorialName:n.Name,playGuid:g._currentPlayGUID,playInitiator:g._currentPlayInitiator,status:t};r.send(e)}catch(t){s.error(t)}},g.auditStep=function(n,e,r){r!=c.STEP_STATUS.SkippedByActionStep&&(l=r==c.STEP_STATUS.SkippedStartedFromBiggerStep?c.EVENTS.Walkthrus.NewSkippedStep:c.EVENTS.Walkthrus.CheckNewStep,v.deprecatedRaiseEvent(l,e));var t,a,i,o,u,l=n.Steps.length;if(e.TutorialId<0)m(f.formatString("Audit steps manager - Step with id {0} has negative tutorial id ({1})",e.Id,e.TutorialId),3);else try{try{return t=e,a=n,i=l,o=r,u=h.getSettingsValue(t.Settings,"action",""),S(a.TutorialId),p.postEvent(p.EVENT_TYPES.Play,{type:p.EVENT_APPS.Step,oId:t.Id,oName:t.StepTitle||"",aType:u?d.map(u.actionType):"",aAppType:u?k.map(u.actionType):"",oType:t.Type,indx:t.StepIndex+1,owId:a.TutorialId,owName:a.Name,owType:p.EVENT_APPS.Walkthru,total:i,status:o,pId:g._currentPlayGUID})}catch(t){return s.error(t,"Failed auditStep: stepId="+e.Id+", wtId="+n.TutorialId+", status="+r+", pId="+g._currentPlayGUID),!0}}catch(t){return s.error(t),t}},this._currentPlayGUID="",this._currentPlayInitiator=null,this.createPlayGuidIfNeeded=S,function(){m=s.wrapCustomerLog(c.LOG_FEATURES.AUDIT_STEPS)}.apply(null,arguments)}},1579:function(t,n){t.exports=function(t,n,e,r){this.register=function(){t.add(e.ENTITY_TYPE.step,n.EVENT_SENDER_EVENT_APPS.Step,function(){return r._currentPlayGUID})}}},1580:function(t,n){t.exports=function(r,a){this.calculate=function(t,n){var e,t=(t.Type===a.stepType.Simple?function(t){return t=t.End,-1<wmjQuery.inArray(a.stepTrigger.Button.toString(),t.split(","))?{next:!0}:{}}:function(t){var t=t.Settings&&t.Settings.popupStepButtons||[],n={};return r.foreach(t,function(t){t=i[t.action];n[t]=!0}),n})(t);return n&&wmjQuery.extend(t,(e={},0<(n=n).passedVisibleSteps&&(e.back=!0),n.passedVisibleSteps<n.totalVisibleSteps&&(e.next=!0),void 0!==n.passedVisibleSteps&&n.passedVisibleSteps===n.totalVisibleSteps&&(e.done=!0),e)),t};var i={},t=a.POPUP_BUTTON_ACTIONS;i[t.NextDone]="next",i[t.Start]="start",i[t.Back]="back",i[t.Cancel]="cancel"}},1581:function(t,n,e){!function(S){t.exports=function(u,l,s,c,f,p,d,h,k,v,m,g){this.showStep=function(t,n,e){var t=s.secureEvalJSON(t),r=(c.fixStep(t,0,h.get()),l.findElement(t));if(u.customerLog("element:",5),u.customerLog(r,5),!r)return!1;var a,i=f.getComplexHtmlElements(t,r),o=(i&&(r=i.elements,a=i.parentElement),t.DesignTemplateId||t.DesignTemplatePlaceholderConfigs&&0!==t.DesignTemplatePlaceholderConfigs.length||(t.DesignTemplatePlaceholderConfigs=m.createPlaceHolderConfigs(g.templateEntityType.balloon,t.StepTitle,t.StepText)),S.create("Balloon",{element:r,parentElement:a,forceEmbedBalloonInIframe:n,positionHelper:p,stepSettings:t.Settings,visibilityFilter:p.getVisibleFilterKey(t),text:{title:t.StepTitle,content:t.StepText,subText:function(t){if(!t||!t.hasOwnProperty("passedVisibleSteps"))return"";var n=h.get().StepsInfoText;return n?(n=n.replace("{0}",t.passedVisibleSteps)).replace("{1}",t.totalVisibleSteps):""}(e)},position:t.Position,data:{stepId:t.Id,type:t.Type},buttons:v.calculate(t,e),configuration:t.Configuration,logger:u,drawer:d.getBalloonDrawer(t.Configuration,t),isViewStep:!0,siteConfig:h.get(),bindButtonsFunc:S.get("BalloonButtonsEventsBinder").attachBalloonXButtonClickEvent,placeholderConfigurations:t.DesignTemplatePlaceholderConfigs}));return k.add(o),o.Show(!0,function(){o.SetTimeoutOn()}),o}}}.call(this,e(2))}}]);